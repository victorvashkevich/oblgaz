<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 8.00.7600.16490"></meta></head><body>
<h1>Механизм обмена данными по организации.</h1>
<h3>Общее описание.</h3>
<p>Механизм обмена данными по организации — это набор средств 1С:Предприятия 8, предназначенных для обмена данными между различными информационными базами 1С:Предприятия 8, позволяющие производить выборочный обмен в разрезе отдельных организаций, по которым ведется учет в информационной базе.</p>
<p class="Usual">Распределенная информационная база представляет собой иерархическую структуру, состоящую из отдельных информационных баз 1С:Предприятия<span style="mso-ansi-language: EN-US" lang="EN-US"> </span>– узлов распределенной информационной базы, между которыми организован обмен данными с целью синхронизации конфигурации и данных.</p>
<p class="Usual">Поддержка РИБ по организации в конфигурации реализована с помощью плана обмена "По организации". В состав обмениваемой информации включены все объекты конфигурации, за исключением:</p>
<ul><li>
<div>объектов, имеющих "локальный смысл", например, Константа.ПараметрыАдминистрированияИБ,</div>
</li><li>
<div>загружаемых объектов, например, данные адресного классификатора</div>
</li><li>
<div>объектов управленческого учета, например, документ.АттестацияРаботника</div></li></ul><p class="Usual">Состав обмениваемой инфорации ограничивается списком организаций, для которых указанный обмен предназначен.</p>
<p class="Usual">При проведении процедуры обмена данными, сведения, для которых можно однозначно определить принадлежность к той или иной организации (например документы, элементы справочника "Договоры контрагентов" и пр.), передаются только в том случае, если эта организация указана в списке организаций плана обмена. Вся прочая информация передается в полном объеме (например, элементы справочников "Номенклатура", "Статьи затрат").</p>
<h3>Создание распределенной информационной базы.</h3>
<p>Для создания распределенной информационной базы, прежде всего, необходимо заполнить список ее узлов в форме списка плана обмена "По организации". </p>
<p>При этом необходимо выполнить:</p>
<p>1. Заполнить реквизиты узла РИБ, изначально присутствующего в списке узлов (со значком <img align="middle" src="../id194e8cbc-9b66-4ca0-85d3-e309dbeaeb54/038b5c85-fb1c-4082-9c4c-e69f8928bf3a_files/Центр. узел.bmp"></img>). Данный узел соответствует текущей информационной базе и в дальнейшем он (и соответственно, данная информационная база)  будет являться центральным узлом РИБ. Только в этой базе будет разрешено вносить изменения в конфигурацию.</p>
<p>2. Создать остальные узлы РИБ, заполнив их реквизиты.</p>
<p>При заполнении реквизитов следует указать:</p>
<ul><li>
<div>Наименование узла,</div>
</li><li>
<div>Код узла - является основным идентификатором узла. Именно по его значению узлы в различных базах РИБ сопоставляются друг с другом. Соответственно, менять код инициализированного узла не рекомендуется.</div>
</li><li>
<div>Префикс узла - коды (номера) всех объектов, создаваемых в различных узлах РИБ префиксуются указанным префиксом. Это необходимо для исключения возможности создания, например, документа в различных базах с одним и тем же номером. Соответственно, при заполнении, для каждого узла следует указывать индивидуальное значение префикса (подробнее в разделе "Префиксация объектов").</div>
</li><li>
<div>Список организация, входящих в узел обмена – перечень организаций, данные по которым будут выгружаться в узел. Данные других организаций, по которым ведется учет в текущей информационной базе в узел выгружаться не будут.</div></li></ul><p class="Usual">Добавление в список первого дополнительного узла РИБ возможно только в монопольном режиме. Данное ограничение необходимо для корректного задействования механизма префиксации, который начинает действовать, только если в списке узлов есть хотя бы один узел, не принадлежащий текущей базе. Таким образом установка префиксов будет выполняться только в случае действительного применения РИБ.</p>
<p class="Usual"> </p>
<p class="Usual">После создания узлов РИБ необходимо выполнить создание начального образа для каждого из узлов (кроме центрального) с помощью кнопки <img align="middle" src="StdPicture.CreateInitialImage" width="16" height="16"></img> командной панели.</p>
<h3>Обмен данными между узлами распределенной информационной базы.</h3>
<p>Формирование сообщения для одного из узлов РИБ выполняется с помощью кнопки "Записать изменения" <img alt="Записать изменения" align="middle" src="StdPicture.WriteChanges"></img>. При этом узел, для которого формируется сообщение, должен быть текущим в списке узлов. Сообщение может быть как в формате XML, так и в сжатом виде (в формате ZIP), что позволяет уменьшить объем файла сообщения и в свою очередь упростить процедуру передачи этого файла, например, по электронной почте. Для сжатия файла сообщения необходимо установить флажок "Сжимать сообщение". При формировании сообщения в него помещаются данные всех созданных или измененных в базе, откуда делается выгрузка, объектов.</p>
<p>Чтение полученного сообщения выполняется с помощью кнопки "Прочитать изменения" <img align="middle" src="StdPicture.ReadChanges" width="16" height="16"></img>. При этом в списке узлов текущим должен быть узел, из которого данное сообщение было получено.</p>
<h3>Префиксация объектов</h3>
<p>При использовании механизма РИБ для всех объектов, создаваемых в узлах распределенной информационной базы к коду или номеру будет добавляться специальный строковой префикс, длиной в три символа. Это позволит избежать возможности возникновения объектов с идентичными кодами или номерами. Как уже упоминалось выше, префикс, применяемый в каждой информационной базе, сохраняется в реквизитах узла, соответствующем данной базе.</p>
<p>Исключением из общего механизма префиксации являются объекты, чей код несет некий методический смысл. Таких как, например, справочник "Банки", где код соответствует БИК этого банка.</p>
<p> </p></body></html>