<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИнформационнаяБаза</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetUnion">
		<name>Данные</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регистратор</dataPath>
			<field>Регистратор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Документ</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонецИнтервала</dataPath>
			<field>КонецИнтервала</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Окончание</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НачалоИнтервала</dataPath>
			<field>НачалоИнтервала</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Начало</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Серия</dataPath>
			<field>Серия</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>План / Факт</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
			<availableValue>
				<value xsi:type="xs:string">Факт</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Факт</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:string">План</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>План</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ФизЛицо</dataPath>
			<field>ФизЛицо</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Физ лицо</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Учет</dataPath>
			<field>Учет</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Учет</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>20</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
			<availableValue>
				<value xsi:type="xs:string">ПоУпрУчету</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>По управленческому учету</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:string">ПоРеглУчету</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>По регламентированному учету</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПланИФактСовпадают</dataPath>
			<field>ПланИФактСовпадают</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>План и факт совпадают</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Состояние</dataPath>
			<field>Состояние</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Состояние</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>100</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
			<availableValue>
				<value xsi:type="xs:string">Утвержден</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Утвержден</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:string">Не утвержден</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Не утвержден</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЕжегодногоОтпуска</dataPath>
			<field>ВидЕжегодногоОтпуска</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид ежегодного отпуска</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сотрудник</dataPath>
			<field>Сотрудник</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сотрудник</v8:content>
				</v8:item>
			</title>
		</field>
		<item xsi:type="DataSetQuery">
			<name>ГрафикОтпусков</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>Регистратор</dataPath>
				<field>Регистратор</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Регистратор</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КонецИнтервала</dataPath>
				<field>КонецИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Конец интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НачалоИнтервала</dataPath>
				<field>НачалоИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Начало интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Серия</dataPath>
				<field>Серия</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Серия</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ФизЛицо</dataPath>
				<field>ФизЛицо</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Физ лицо</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Учет</dataPath>
				<field>Учет</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Учет</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПланИФактСовпадают</dataPath>
				<field>ПланИФактСовпадают</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>План и факт совпадают</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Состояние</dataPath>
				<field>Состояние</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Состояние</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЕжегодногоОтпуска</dataPath>
				<field>ВидЕжегодногоОтпуска</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ежегодного отпуска</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Сотрудник</dataPath>
				<field>Сотрудник</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сотрудник</v8:content>
					</v8:item>
				</title>
			</field>
			<dataSource>ИнформационнаяБаза</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ГрафикОтпусков.НачалоИнтервала КАК НачалоИнтервала,
	ГрафикОтпусков.КонецИнтервала КАК КонецИнтервала,
	ГрафикОтпусков.Регистратор КАК Регистратор,
	ГрафикОтпусков.ФизЛицо КАК ФизЛицо,
	ГрафикОтпусков.Сотрудник КАК Сотрудник,
	ГрафикОтпусков.Серия КАК Серия,
	ГрафикОтпусков.Учет КАК Учет,
	ГрафикОтпусков.ПланИФактСовпадают КАК ПланИФактСовпадают,
	ГрафикОтпусков.Состояние КАК Состояние,
	ГрафикОтпусков.ВидЕжегодногоОтпуска КАК ВидЕжегодногоОтпуска
{ВЫБРАТЬ
	НачалоИнтервала,
	КонецИнтервала,
	Регистратор.*,
	ФизЛицо.*,
	Сотрудник,
	Серия,
	Учет,
	ПланИФактСовпадают,
	Состояние,
	ВидЕжегодногоОтпуска}
ИЗ
	(ВЫБРАТЬ
		НАЧАЛОПЕРИОДА(Основная.НачалоИнтервала, ДЕНЬ) КАК НачалоИнтервала,
		КОНЕЦПЕРИОДА(Основная.КонецИнтервала, ДЕНЬ) КАК КонецИнтервала,
		Основная.Регистратор КАК Регистратор,
		Основная.ФизЛицо КАК ФизЛицо,
		Сотрудники.Сотрудник КАК Сотрудник,
		"План" КАК Серия,
		"ПоУпрУчету" КАК Учет,
		ВЫБОР
			КОГДА (НЕ Факт.ФизЛицо ЕСТЬ NULL )
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ КАК ПланИФактСовпадают,
		Основная.Состояние КАК Состояние,
		"" КАК ВидЕжегодногоОтпуска
	ИЗ
		(ВЫБРАТЬ
			ГрафикОтпусков.ФизЛицо КАК ФизЛицо,
			ГрафикОтпусков.Период КАК НачалоИнтервала,
			ГрафикОтпусков.ПериодЗавершения КАК КонецИнтервала,
			ГрафикОтпусков.Регистратор КАК Регистратор,
			"Утвержден" КАК Состояние
		ИЗ
			РегистрСведений.СобытийныйПланЗанятостиФизлиц КАК ГрафикОтпусков
		ГДЕ
			ГрафикОтпусков.Состояние = ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.ОтпускЕжегодный)
			И ГрафикОтпусков.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ГрафикОтпусков.ФизЛицо,
			ГрафикОтпусков.Период,
			ГрафикОтпусков.ПериодЗавершения,
			ГрафикОтпусков.Регистратор,
			"Утвержден"
		ИЗ
			РегистрСведений.СобытийныйПланЗанятостиФизлиц.СрезПоследних(&amp;НачалоПериода, ) КАК ГрафикОтпусков
		ГДЕ
			ГрафикОтпусков.Состояние = ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.ОтпускЕжегодный)
			И ГрафикОтпусков.Период &lt;= &amp;КонецПериода
			И ГрафикОтпусков.ПериодЗавершения &gt;= &amp;НачалоПериода
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ПланированиеОтпускаРаботники.ФизЛицо,
			ПланированиеОтпускаРаботники.ДатаНачала,
			ПланированиеОтпускаРаботники.ДатаОкончания,
			ПланированиеОтпускаРаботники.Ссылка,
			"Не утвержден"
		ИЗ
			Документ.ПланированиеОтпуска.Работники КАК ПланированиеОтпускаРаботники
		ГДЕ
			ПланированиеОтпускаРаботники.ДатаНачала &lt;= &amp;КонецПериода
			И ПланированиеОтпускаРаботники.ДатаОкончания &gt;= &amp;НачалоПериода
			И (ПланированиеОтпускаРаботники.СостояниеУтверждения = ЗНАЧЕНИЕ(Перечисление.СостоянияУтверждения.НеУтвержден)
					ИЛИ (НЕ ПланированиеОтпускаРаботники.Ссылка.Проведен)
						И ПланированиеОтпускаРаботники.СостояниеУтверждения = ЗНАЧЕНИЕ(Перечисление.СостоянияУтверждения.Утвержден))
			И (НЕ ПланированиеОтпускаРаботники.Ссылка.ПометкаУдаления)) КАК Основная
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				НАЧАЛОПЕРИОДА(Основная.НачалоИнтервала, ДЕНЬ) КАК НачалоИнтервала,
				КОНЕЦПЕРИОДА(Основная.КонецИнтервала, ДЕНЬ) КАК КонецИнтервала,
				Основная.ФизЛицо КАК ФизЛицо
			ИЗ
				(ВЫБРАТЬ
					ДатыУходаВОтпуск.ФизЛицо КАК ФизЛицо,
					ДатыУходаВОтпуск.Регистратор КАК Регистратор,
					ДатыУходаВОтпуск.НачалоИнтервала КАК НачалоИнтервала,
					ЕСТЬNULL(ДатыВозврата.КонецИнтервала, &amp;ТекущаяДата) КАК КонецИнтервала
				ИЗ
					(ВЫБРАТЬ
						СостояниеРаботников.ФизЛицо КАК ФизЛицо,
						ВЫБОР
							КОГДА СостояниеРаботников.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
								ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботников.ПериодЗавершения, ДЕНЬ, -1)
							ИНАЧЕ СостояниеРаботников.ПериодЗавершения
						КОНЕЦ КАК ПериодЗавершения,
						СостояниеРаботников.Период КАК НачалоИнтервала,
						СостояниеРаботников.Регистратор КАК Регистратор
					ИЗ
						РегистрСведений.СостояниеРаботников КАК СостояниеРаботников
					ГДЕ
						СостояниеРаботников.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)
						И СостояниеРаботников.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						СостояниеРаботниковСрезПоследних.ФизЛицо,
						ВЫБОР
							КОГДА СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
								ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
							ИНАЧЕ СостояниеРаботниковСрезПоследних.ПериодЗавершения
						КОНЕЦ,
						СостояниеРаботниковСрезПоследних.Период,
						СостояниеРаботниковСрезПоследних.Регистратор
					ИЗ
						РегистрСведений.СостояниеРаботников.СрезПоследних(&amp;НачалоПериода, ) КАК СостояниеРаботниковСрезПоследних
					ГДЕ
						ВЫБОР
								КОГДА &amp;НачалоПериода &gt;= СостояниеРаботниковСрезПоследних.ПериодЗавершения
										И СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
									ТОГДА СостояниеРаботниковСрезПоследних.СостояниеЗавершения
								ИНАЧЕ СостояниеРаботниковСрезПоследних.Состояние
							КОНЕЦ = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)) КАК ДатыУходаВОтпуск
						ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
							ДатыУходаВОтпуск.ФизЛицо КАК ФизЛицо,
							ДатыУходаВОтпуск.НачалоИнтервала КАК НачалоИнтервала,
							ВЫБОР
								КОГДА ДатыУходаВОтпуск.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
									ТОГДА ВЫБОР
											КОГДА МИНИМУМ(СостояниеРаботников.Период) ЕСТЬ NULL 
												ТОГДА ДатыУходаВОтпуск.ПериодЗавершения
											ИНАЧЕ ВЫБОР
													КОГДА ДатыУходаВОтпуск.ПериодЗавершения &lt; МИНИМУМ(СостояниеРаботников.Период)
														ТОГДА ДатыУходаВОтпуск.ПериодЗавершения
													ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(СостояниеРаботников.Период), СЕКУНДА, -1)
												КОНЕЦ
										КОНЕЦ
								ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(СостояниеРаботников.Период), СЕКУНДА, -1)
							КОНЕЦ КАК КонецИнтервала
						ИЗ
							(ВЫБРАТЬ
								СостояниеРаботников.ФизЛицо КАК ФизЛицо,
								ВЫБОР
									КОГДА СостояниеРаботников.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
										ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботников.ПериодЗавершения, ДЕНЬ, -1)
									ИНАЧЕ СостояниеРаботников.ПериодЗавершения
								КОНЕЦ КАК ПериодЗавершения,
								СостояниеРаботников.Период КАК НачалоИнтервала,
								СостояниеРаботников.Регистратор КАК Регистратор
							ИЗ
								РегистрСведений.СостояниеРаботников КАК СостояниеРаботников
							ГДЕ
								СостояниеРаботников.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)
								И СостояниеРаботников.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
							
							ОБЪЕДИНИТЬ ВСЕ
							
							ВЫБРАТЬ
								СостояниеРаботниковСрезПоследних.ФизЛицо,
								ВЫБОР
									КОГДА СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
										ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
									ИНАЧЕ СостояниеРаботниковСрезПоследних.ПериодЗавершения
								КОНЕЦ,
								СостояниеРаботниковСрезПоследних.Период,
								СостояниеРаботниковСрезПоследних.Регистратор
							ИЗ
								РегистрСведений.СостояниеРаботников.СрезПоследних(&amp;НачалоПериода, ) КАК СостояниеРаботниковСрезПоследних
							ГДЕ
								ВЫБОР
										КОГДА &amp;НачалоПериода &gt;= СостояниеРаботниковСрезПоследних.ПериодЗавершения
												И СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
											ТОГДА СостояниеРаботниковСрезПоследних.СостояниеЗавершения
										ИНАЧЕ СостояниеРаботниковСрезПоследних.Состояние
									КОНЕЦ = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)) КАК ДатыУходаВОтпуск
								ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СостояниеРаботников КАК СостояниеРаботников
								ПО (СостояниеРаботников.ФизЛицо = ДатыУходаВОтпуск.ФизЛицо)
									И (СостояниеРаботников.Период &gt; ДатыУходаВОтпуск.НачалоИнтервала)
						
						СГРУППИРОВАТЬ ПО
							ДатыУходаВОтпуск.ФизЛицо,
							ДатыУходаВОтпуск.ПериодЗавершения,
							ДатыУходаВОтпуск.НачалоИнтервала) КАК ДатыВозврата
						ПО (ДатыВозврата.ФизЛицо = ДатыУходаВОтпуск.ФизЛицо)
							И (ДатыВозврата.НачалоИнтервала = ДатыУходаВОтпуск.НачалоИнтервала)) КАК Основная
			{ГДЕ
				Основная.Регистратор.* КАК Регистратор,
				Основная.НачалоИнтервала,
				Основная.КонецИнтервала,
				("Факт") КАК Серия,
				Основная.ФизЛицо.*,
				("ПоУпрУчету") КАК Учет}) КАК Факт
			ПО Основная.ФизЛицо = Факт.ФизЛицо
				И (НАЧАЛОПЕРИОДА(Основная.НачалоИнтервала, ДЕНЬ) = Факт.НачалоИнтервала)
				И (КОНЕЦПЕРИОДА(Основная.КонецИнтервала, ДЕНЬ) = Факт.КонецИнтервала)
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				МАКСИМУМ(СписокСотрудников.Сотрудник) КАК Сотрудник,
				СписокСотрудников.Физлицо КАК Физлицо
			ИЗ
				(ВЫБРАТЬ
					МАКСИМУМ(РаботникиОсновноеМесто.Сотрудник) КАК Сотрудник,
					РаботникиОсновноеМесто.Сотрудник.Физлицо КАК Физлицо,
					ВЫБОР
						КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
							ТОГДА 1
						ИНАЧЕ 3
					КОНЕЦ КАК Приоритет
				ИЗ
					РегистрСведений.РаботникиОрганизаций.СрезПоследних(
							&amp;ДатаСведений,
							Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
								И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ОсновноеМестоРаботы)) КАК РаботникиОсновноеМесто
				
				СГРУППИРОВАТЬ ПО
					РаботникиОсновноеМесто.Сотрудник.Физлицо,
					ВЫБОР
						КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
							ТОГДА 1
						ИНАЧЕ 3
					КОНЕЦ
				
				ОБЪЕДИНИТЬ
				
				ВЫБРАТЬ
					МАКСИМУМ(РаботникиСовместительство.Сотрудник),
					РаботникиСовместительство.Сотрудник.Физлицо,
					ВЫБОР
						КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
							ТОГДА 2
						ИНАЧЕ 3
					КОНЕЦ
				ИЗ
					РегистрСведений.РаботникиОрганизаций.СрезПоследних(
							&amp;ДатаСведений,
							Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
								И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.Совместительство)) КАК РаботникиСовместительство
				
				СГРУППИРОВАТЬ ПО
					РаботникиСовместительство.Сотрудник.Физлицо,
					ВЫБОР
						КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
							ТОГДА 2
						ИНАЧЕ 3
					КОНЕЦ
				
				ОБЪЕДИНИТЬ
				
				ВЫБРАТЬ
					МАКСИМУМ(СотрудникиДУ.Ссылка),
					СотрудникиДУ.Физлицо,
					4
				ИЗ
					Справочник.СотрудникиОрганизаций КАК СотрудникиДУ
				ГДЕ
					(СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ДоговорУправленческий)
							ИЛИ СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор))
				
				СГРУППИРОВАТЬ ПО
					СотрудникиДУ.Физлицо) КАК СписокСотрудников
					ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
						СписокФизическихЛиц.Физлицо КАК Физлицо,
						МИНИМУМ(СписокФизическихЛиц.Приоритет) КАК Приоритет
					ИЗ
						(ВЫБРАТЬ
							РаботникиОсновноеМесто.Сотрудник.Физлицо КАК Физлицо,
							ВЫБОР
								КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
									ТОГДА 1
								ИНАЧЕ 3
							КОНЕЦ КАК Приоритет
						ИЗ
							РегистрСведений.РаботникиОрганизаций.СрезПоследних(
									&amp;ДатаСведений,
									Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
										И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ОсновноеМестоРаботы)) КАК РаботникиОсновноеМесто
						
						ОБЪЕДИНИТЬ
						
						ВЫБРАТЬ
							РаботникиСовместительство.Сотрудник.Физлицо,
							ВЫБОР
								КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
									ТОГДА 2
								ИНАЧЕ 3
							КОНЕЦ
						ИЗ
							РегистрСведений.РаботникиОрганизаций.СрезПоследних(
									&amp;ДатаСведений,
									Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
										И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.Совместительство)) КАК РаботникиСовместительство
						
						ОБЪЕДИНИТЬ
						
						ВЫБРАТЬ
							СотрудникиДУ.Физлицо,
							4
						ИЗ
							Справочник.СотрудникиОрганизаций КАК СотрудникиДУ
						ГДЕ
							(СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ДоговорУправленческий)
									ИЛИ СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор))) КАК СписокФизическихЛиц
					
					СГРУППИРОВАТЬ ПО
						СписокФизическихЛиц.Физлицо) КАК СписокФизическихЛиц
					ПО СписокСотрудников.Физлицо = СписокФизическихЛиц.Физлицо
						И СписокСотрудников.Приоритет = СписокФизическихЛиц.Приоритет
			{ГДЕ
				СписокСотрудников.Сотрудник.*,
				СписокСотрудников.Физлицо.*}
			
			СГРУППИРОВАТЬ ПО
				СписокСотрудников.Физлицо) КАК Сотрудники
			ПО Основная.ФизЛицо = Сотрудники.Физлицо
	ГДЕ
		Сотрудники.Сотрудник ЕСТЬ НЕ NULL 
	{ГДЕ
		Основная.Регистратор.* КАК Регистратор,
		Основная.НачалоИнтервала,
		Основная.КонецИнтервала,
		Основная.ФизЛицо.*,
		("План") КАК Серия,
		("ПоУпрУчету") КАК Учет,
		(ВЫБОР
				КОГДА (НЕ Факт.ФизЛицо ЕСТЬ NULL )
					ТОГДА ИСТИНА
				ИНАЧЕ ЛОЖЬ
			КОНЕЦ) КАК ПланИФактСовпадают,
		Основная.Состояние,
		("") КАК ВидЕжегодногоОтпуска,
		Сотрудники.Сотрудник}) КАК ГрафикОтпусков
{ГДЕ
	ГрафикОтпусков.НачалоИнтервала,
	ГрафикОтпусков.КонецИнтервала,
	ГрафикОтпусков.Регистратор.*,
	ГрафикОтпусков.ФизЛицо.*,
	ГрафикОтпусков.Сотрудник,
	ГрафикОтпусков.Серия,
	ГрафикОтпусков.Учет,
	ГрафикОтпусков.ПланИФактСовпадают,
	ГрафикОтпусков.Состояние,
	ГрафикОтпусков.ВидЕжегодногоОтпуска}</query>
			<autoFillFields>false</autoFillFields>
		</item>
		<item xsi:type="DataSetQuery">
			<name>ФактическиеОтпуска</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>Регистратор</dataPath>
				<field>Регистратор</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Регистратор</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>КонецИнтервала</dataPath>
				<field>КонецИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Конец интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НачалоИнтервала</dataPath>
				<field>НачалоИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Начало интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Серия</dataPath>
				<field>Серия</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Серия</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ФизЛицо</dataPath>
				<field>ФизЛицо</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Физ лицо</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Учет</dataPath>
				<field>Учет</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Учет</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЕжегодногоОтпуска</dataPath>
				<field>ВидЕжегодногоОтпуска</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ежегодного отпуска</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Сотрудник</dataPath>
				<field>Сотрудник</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сотрудник</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПланИФактСовпадают</dataPath>
				<field>ПланИФактСовпадают</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>План и факт совпадают</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Состояние</dataPath>
				<field>Состояние</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Состояние</v8:content>
					</v8:item>
				</title>
			</field>
			<dataSource>ИнформационнаяБаза</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ФактическиеОтпуска.НачалоИнтервала КАК НачалоИнтервала,
	ФактическиеОтпуска.КонецИнтервала КАК КонецИнтервала,
	ФактическиеОтпуска.Регистратор КАК Регистратор,
	ФактическиеОтпуска.Серия КАК Серия,
	ФактическиеОтпуска.ФизЛицо КАК ФизЛицо,
	ФактическиеОтпуска.Учет КАК Учет,
	ФактическиеОтпуска.ВидЕжегодногоОтпуска КАК ВидЕжегодногоОтпуска,
	ФактическиеОтпуска.Сотрудник КАК Сотрудник,
	ЛОЖЬ КАК ПланИФактСовпадают,
	"" КАК Состояние
{ВЫБРАТЬ
	НачалоИнтервала,
	КонецИнтервала,
	Регистратор.*,
	Серия,
	ФизЛицо.*,
	Учет,
	ВидЕжегодногоОтпуска,
	Сотрудник,
	ПланИФактСовпадают,
	Состояние}
ИЗ
	(ВЫБРАТЬ
		НАЧАЛОПЕРИОДА(Основная.НачалоИнтервала, ДЕНЬ) КАК НачалоИнтервала,
		КОНЕЦПЕРИОДА(Основная.КонецИнтервала, ДЕНЬ) КАК КонецИнтервала,
		Основная.Регистратор КАК Регистратор,
		"Факт" КАК Серия,
		Основная.ФизЛицо КАК ФизЛицо,
		"ПоУпрУчету" КАК Учет,
		"" КАК ВидЕжегодногоОтпуска,
		Сотрудники.Сотрудник КАК Сотрудник
	ИЗ
		(ВЫБРАТЬ
			ДатыУходаВОтпуск.ФизЛицо КАК ФизЛицо,
			ДатыУходаВОтпуск.Регистратор КАК Регистратор,
			ДатыУходаВОтпуск.НачалоИнтервала КАК НачалоИнтервала,
			ЕСТЬNULL(ДатыВозврата.КонецИнтервала, &amp;ТекущаяДата) КАК КонецИнтервала
		ИЗ
			(ВЫБРАТЬ
				СостояниеРаботников.ФизЛицо КАК ФизЛицо,
				ВЫБОР
					КОГДА СостояниеРаботников.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
						ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботников.ПериодЗавершения, ДЕНЬ, -1)
					ИНАЧЕ СостояниеРаботников.ПериодЗавершения
				КОНЕЦ КАК ПериодЗавершения,
				СостояниеРаботников.Период КАК НачалоИнтервала,
				СостояниеРаботников.Регистратор КАК Регистратор
			ИЗ
				РегистрСведений.СостояниеРаботников КАК СостояниеРаботников
			ГДЕ
				СостояниеРаботников.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)
				И СостояниеРаботников.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
			
			ОБЪЕДИНИТЬ ВСЕ
			
			ВЫБРАТЬ
				СостояниеРаботниковСрезПоследних.ФизЛицо,
				ВЫБОР
					КОГДА СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
						ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
					ИНАЧЕ СостояниеРаботниковСрезПоследних.ПериодЗавершения
				КОНЕЦ,
				СостояниеРаботниковСрезПоследних.Период,
				СостояниеРаботниковСрезПоследних.Регистратор
			ИЗ
				РегистрСведений.СостояниеРаботников.СрезПоследних(&amp;НачалоПериода, ) КАК СостояниеРаботниковСрезПоследних
			ГДЕ
				ВЫБОР
						КОГДА &amp;НачалоПериода &gt;= СостояниеРаботниковСрезПоследних.ПериодЗавершения
								И СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							ТОГДА СостояниеРаботниковСрезПоследних.СостояниеЗавершения
						ИНАЧЕ СостояниеРаботниковСрезПоследних.Состояние
					КОНЕЦ = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)) КАК ДатыУходаВОтпуск
				ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
					ДатыУходаВОтпуск.ФизЛицо КАК ФизЛицо,
					ДатыУходаВОтпуск.НачалоИнтервала КАК НачалоИнтервала,
					ВЫБОР
						КОГДА ДатыУходаВОтпуск.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							ТОГДА ВЫБОР
									КОГДА МИНИМУМ(СостояниеРаботников.Период) ЕСТЬ NULL 
										ТОГДА ДатыУходаВОтпуск.ПериодЗавершения
									ИНАЧЕ ВЫБОР
											КОГДА ДатыУходаВОтпуск.ПериодЗавершения &lt; МИНИМУМ(СостояниеРаботников.Период)
												ТОГДА ДатыУходаВОтпуск.ПериодЗавершения
											ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(СостояниеРаботников.Период), СЕКУНДА, -1)
										КОНЕЦ
								КОНЕЦ
						ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(СостояниеРаботников.Период), СЕКУНДА, -1)
					КОНЕЦ КАК КонецИнтервала
				ИЗ
					(ВЫБРАТЬ
						СостояниеРаботников.ФизЛицо КАК ФизЛицо,
						ВЫБОР
							КОГДА СостояниеРаботников.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
								ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботников.ПериодЗавершения, ДЕНЬ, -1)
							ИНАЧЕ СостояниеРаботников.ПериодЗавершения
						КОНЕЦ КАК ПериодЗавершения,
						СостояниеРаботников.Период КАК НачалоИнтервала,
						СостояниеРаботников.Регистратор КАК Регистратор
					ИЗ
						РегистрСведений.СостояниеРаботников КАК СостояниеРаботников
					ГДЕ
						СостояниеРаботников.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)
						И СостояниеРаботников.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						СостояниеРаботниковСрезПоследних.ФизЛицо,
						ВЫБОР
							КОГДА СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
								ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
							ИНАЧЕ СостояниеРаботниковСрезПоследних.ПериодЗавершения
						КОНЕЦ,
						СостояниеРаботниковСрезПоследних.Период,
						СостояниеРаботниковСрезПоследних.Регистратор
					ИЗ
						РегистрСведений.СостояниеРаботников.СрезПоследних(&amp;НачалоПериода, ) КАК СостояниеРаботниковСрезПоследних
					ГДЕ
						ВЫБОР
								КОГДА &amp;НачалоПериода &gt;= СостояниеРаботниковСрезПоследних.ПериодЗавершения
										И СостояниеРаботниковСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
									ТОГДА СостояниеРаботниковСрезПоследних.СостояниеЗавершения
								ИНАЧЕ СостояниеРаботниковСрезПоследних.Состояние
							КОНЕЦ = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.ОтпускЕжегодный)) КАК ДатыУходаВОтпуск
						ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СостояниеРаботников КАК СостояниеРаботников
						ПО (СостояниеРаботников.ФизЛицо = ДатыУходаВОтпуск.ФизЛицо)
							И (СостояниеРаботников.Период &gt; ДатыУходаВОтпуск.НачалоИнтервала)
				
				СГРУППИРОВАТЬ ПО
					ДатыУходаВОтпуск.ФизЛицо,
					ДатыУходаВОтпуск.ПериодЗавершения,
					ДатыУходаВОтпуск.НачалоИнтервала) КАК ДатыВозврата
				ПО (ДатыВозврата.ФизЛицо = ДатыУходаВОтпуск.ФизЛицо)
					И (ДатыВозврата.НачалоИнтервала = ДатыУходаВОтпуск.НачалоИнтервала)) КАК Основная
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
	МАКСИМУМ(СписокСотрудников.Сотрудник) КАК Сотрудник,
	СписокСотрудников.Физлицо КАК Физлицо
ИЗ
	(ВЫБРАТЬ
		МАКСИМУМ(РаботникиОсновноеМесто.Сотрудник) КАК Сотрудник,
		РаботникиОсновноеМесто.Сотрудник.Физлицо КАК Физлицо,
		ВЫБОР
			КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
				ТОГДА 1
			ИНАЧЕ 3
		КОНЕЦ КАК Приоритет
	ИЗ
		РегистрСведений.РаботникиОрганизаций.СрезПоследних(
				&amp;ДатаСведений,
				Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
					И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ОсновноеМестоРаботы)) КАК РаботникиОсновноеМесто
	
	СГРУППИРОВАТЬ ПО
		РаботникиОсновноеМесто.Сотрудник.Физлицо,
		ВЫБОР
			КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
				ТОГДА 1
			ИНАЧЕ 3
		КОНЕЦ
	
	ОБЪЕДИНИТЬ
	
	ВЫБРАТЬ
		МАКСИМУМ(РаботникиСовместительство.Сотрудник),
		РаботникиСовместительство.Сотрудник.Физлицо,
		ВЫБОР
			КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
				ТОГДА 2
			ИНАЧЕ 3
		КОНЕЦ
	ИЗ
		РегистрСведений.РаботникиОрганизаций.СрезПоследних(
				&amp;ДатаСведений,
				Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
					И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.Совместительство)) КАК РаботникиСовместительство
	
	СГРУППИРОВАТЬ ПО
		РаботникиСовместительство.Сотрудник.Физлицо,
		ВЫБОР
			КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
				ТОГДА 2
			ИНАЧЕ 3
		КОНЕЦ
	
	ОБЪЕДИНИТЬ
	
	ВЫБРАТЬ
		МАКСИМУМ(СотрудникиДУ.Ссылка),
		СотрудникиДУ.Физлицо,
		4
	ИЗ
		Справочник.СотрудникиОрганизаций КАК СотрудникиДУ
	ГДЕ
		(СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ДоговорУправленческий)
				ИЛИ СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор))
	
	СГРУППИРОВАТЬ ПО
		СотрудникиДУ.Физлицо) КАК СписокСотрудников
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			СписокФизическихЛиц.Физлицо КАК Физлицо,
			МИНИМУМ(СписокФизическихЛиц.Приоритет) КАК Приоритет
		ИЗ
			(ВЫБРАТЬ
				РаботникиОсновноеМесто.Сотрудник.Физлицо КАК Физлицо,
				ВЫБОР
					КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
						ТОГДА 1
					ИНАЧЕ 3
				КОНЕЦ КАК Приоритет
			ИЗ
				РегистрСведений.РаботникиОрганизаций.СрезПоследних(
						&amp;ДатаСведений,
						Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
							И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ОсновноеМестоРаботы)) КАК РаботникиОсновноеМесто
			
			ОБЪЕДИНИТЬ
			
			ВЫБРАТЬ
				РаботникиСовместительство.Сотрудник.Физлицо,
				ВЫБОР
					КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
						ТОГДА 2
					ИНАЧЕ 3
				КОНЕЦ
			ИЗ
				РегистрСведений.РаботникиОрганизаций.СрезПоследних(
						&amp;ДатаСведений,
						Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
							И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.Совместительство)) КАК РаботникиСовместительство
			
			ОБЪЕДИНИТЬ
			
			ВЫБРАТЬ
				СотрудникиДУ.Физлицо,
				4
			ИЗ
				Справочник.СотрудникиОрганизаций КАК СотрудникиДУ
			ГДЕ
				(СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ДоговорУправленческий)
						ИЛИ СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор))) КАК СписокФизическихЛиц
		
		СГРУППИРОВАТЬ ПО
			СписокФизическихЛиц.Физлицо) КАК СписокФизическихЛиц
		ПО СписокСотрудников.Физлицо = СписокФизическихЛиц.Физлицо
			И СписокСотрудников.Приоритет = СписокФизическихЛиц.Приоритет
{ГДЕ
	СписокСотрудников.Сотрудник.*,
	СписокСотрудников.Физлицо.*}

СГРУППИРОВАТЬ ПО
	СписокСотрудников.Физлицо) КАК Сотрудники
			ПО Основная.ФизЛицо = Сотрудники.Физлицо
	ГДЕ
		Сотрудники.Сотрудник ЕСТЬ НЕ NULL 
	{ГДЕ
		Основная.Регистратор.* КАК Регистратор,
		Основная.НачалоИнтервала,
		Основная.КонецИнтервала,
		("Факт") КАК Серия,
		Основная.ФизЛицо.*,
		("ПоУпрУчету") КАК Учет,
		("") КАК ВидЕжегодногоОтпуска,
		Сотрудники.Сотрудник}) КАК ФактическиеОтпуска
{ГДЕ
	ФактическиеОтпуска.НачалоИнтервала,
	ФактическиеОтпуска.КонецИнтервала,
	ФактическиеОтпуска.Регистратор.*,
	ФактическиеОтпуска.Серия,
	ФактическиеОтпуска.ФизЛицо.*,
	ФактическиеОтпуска.Учет,
	ФактическиеОтпуска.ВидЕжегодногоОтпуска,
	ФактическиеОтпуска.Сотрудник,
	(ЛОЖЬ) КАК ПланИФактСовпадают,
	"" КАК Состояние}</query>
			<autoFillFields>false</autoFillFields>
		</item>
		<item xsi:type="DataSetQuery">
			<name>ГрафикОтпусковРаботниковОрганизаций</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>КонецИнтервала</dataPath>
				<field>КонецИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Конец интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НачалоИнтервала</dataPath>
				<field>НачалоИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Начало интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Регистратор</dataPath>
				<field>Регистратор</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Регистратор</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Серия</dataPath>
				<field>Серия</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Серия</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ФизЛицо</dataPath>
				<field>ФизЛицо</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Физ лицо</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Учет</dataPath>
				<field>Учет</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Учет</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПланИФактСовпадают</dataPath>
				<field>ПланИФактСовпадают</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>План и факт совпадают</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Состояние</dataPath>
				<field>Состояние</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Состояние</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЕжегодногоОтпуска</dataPath>
				<field>ВидЕжегодногоОтпуска</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ежегодного отпуска</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Сотрудник</dataPath>
				<field>Сотрудник</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сотрудник</v8:content>
					</v8:item>
				</title>
			</field>
			<dataSource>ИнформационнаяБаза</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ГрафикОтпусковРаботниковОрганизаций.ФизЛицо КАК ФизЛицо,
	ГрафикОтпусковРаботниковОрганизаций.Регистратор КАК Регистратор,
	ГрафикОтпусковРаботниковОрганизаций.НачалоИнтервала КАК НачалоИнтервала,
	ГрафикОтпусковРаботниковОрганизаций.КонецИнтервала КАК КонецИнтервала,
	ГрафикОтпусковРаботниковОрганизаций.Серия КАК Серия,
	ГрафикОтпусковРаботниковОрганизаций.Учет КАК Учет,
	ГрафикОтпусковРаботниковОрганизаций.ПланИФактСовпадают КАК ПланИФактСовпадают,
	ГрафикОтпусковРаботниковОрганизаций.Состояние КАК Состояние,
	ГрафикОтпусковРаботниковОрганизаций.ВидЕжегодногоОтпуска КАК ВидЕжегодногоОтпуска,
	ГрафикОтпусковРаботниковОрганизаций.Сотрудник КАК Сотрудник
{ВЫБРАТЬ
	ФизЛицо.*,
	Регистратор.*,
	НачалоИнтервала,
	КонецИнтервала,
	Серия,
	Учет,
	ПланИФактСовпадают,
	Состояние,
	ВидЕжегодногоОтпуска,
	Сотрудник.*}
ИЗ
	(ВЫБРАТЬ
		Основная.ФизЛицо КАК ФизЛицо,
		Основная.Регистратор КАК Регистратор,
		НАЧАЛОПЕРИОДА(Основная.НачалоИнтервала, ДЕНЬ) КАК НачалоИнтервала,
		КОНЕЦПЕРИОДА(Основная.КонецИнтервала, ДЕНЬ) КАК КонецИнтервала,
		"План" КАК Серия,
		"ПоРеглУчету" КАК Учет,
		ВЫБОР
			КОГДА (НЕ Факт.ФизЛицо ЕСТЬ NULL )
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ КАК ПланИФактСовпадают,
		"Утвержден" КАК Состояние,
		"" КАК ВидЕжегодногоОтпуска,
		Основная.Сотрудник КАК Сотрудник
	{ВЫБРАТЬ
		ФизЛицо.*,
		Регистратор.*,
		НачалоИнтервала,
		КонецИнтервала,
		Серия,
		Учет,
		ПланИФактСовпадают,
		Состояние,
		ВидЕжегодногоОтпуска,
		Сотрудник.*}
	ИЗ
		(ВЫБРАТЬ
			ГрафикОтпусковОрганизации.Сотрудник.Физлицо КАК ФизЛицо,
			ГрафикОтпусковОрганизации.Сотрудник КАК Сотрудник,
			ГрафикОтпусковОрганизации.Организация КАК Организация,
			ГрафикОтпусковОрганизации.Период КАК НачалоИнтервала,
			ГрафикОтпусковОрганизации.ДатаОкончания КАК КонецИнтервала,
			ГрафикОтпусковОрганизации.Регистратор КАК Регистратор
		ИЗ
			РегистрСведений.ГрафикОтпусковОрганизаций КАК ГрафикОтпусковОрганизации
		ГДЕ
			ГрафикОтпусковОрганизации.Состояние = ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.ОтпускЕжегодный)
			И ГрафикОтпусковОрганизации.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ГрафикОтпусковОрганизации.Сотрудник.Физлицо,
			ГрафикОтпусковОрганизации.Сотрудник,
			ГрафикОтпусковОрганизации.Организация,
			ГрафикОтпусковОрганизации.Период,
			ГрафикОтпусковОрганизации.ДатаОкончания,
			ГрафикОтпусковОрганизации.Регистратор
		ИЗ
			РегистрСведений.ГрафикОтпусковОрганизаций.СрезПоследних(&amp;НачалоПериода, ) КАК ГрафикОтпусковОрганизации
		ГДЕ
			ГрафикОтпусковОрганизации.Состояние = ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.ОтпускЕжегодный)
			И ГрафикОтпусковОрганизации.Период &lt;= &amp;КонецПериода
			И ГрафикОтпусковОрганизации.ДатаОкончания &gt;= &amp;НачалоПериода) КАК Основная
			ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				Основная.ФизЛицо КАК ФизЛицо,
				НАЧАЛОПЕРИОДА(Основная.НачалоИнтервала, ДЕНЬ) КАК НачалоИнтервала,
				КОНЕЦПЕРИОДА(Основная.КонецИнтервала, ДЕНЬ) КАК КонецИнтервала,
				Основная.Организация КАК Организация,
				Основная.Сотрудник КАК Сотрудник
			ИЗ
				(ВЫБРАТЬ
					ДатыУходаВОтпуск.Сотрудник.Физлицо КАК ФизЛицо,
					ДатыУходаВОтпуск.Сотрудник КАК Сотрудник,
					ДатыУходаВОтпуск.Организация КАК Организация,
					ДатыУходаВОтпуск.Регистратор КАК Регистратор,
					ДатыУходаВОтпуск.НачалоИнтервала КАК НачалоИнтервала,
					ЕСТЬNULL(ДатыВозврата.КонецИнтервала, &amp;ТекущаяДата) КАК КонецИнтервала
				ИЗ
					(ВЫБРАТЬ
						СостояниеРаботниковОрганизации.Сотрудник.Физлицо КАК ФизЛицо,
						СостояниеРаботниковОрганизации.Сотрудник КАК Сотрудник,
						СостояниеРаботниковОрганизации.Организация КАК Организация,
						СостояниеРаботниковОрганизации.Регистратор КАК Регистратор,
						ВЫБОР
							КОГДА СостояниеРаботниковОрганизации.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
								ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковОрганизации.ПериодЗавершения, ДЕНЬ, -1)
							ИНАЧЕ СостояниеРаботниковОрганизации.ПериодЗавершения
						КОНЕЦ КАК ПериодЗавершения,
						СостояниеРаботниковОрганизации.Период КАК НачалоИнтервала
					ИЗ
						РегистрСведений.СостояниеРаботниковОрганизаций КАК СостояниеРаботниковОрганизации
					ГДЕ
						СостояниеРаботниковОрганизации.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботникаОрганизации.ОтпускЕжегодный)
						И СостояниеРаботниковОрганизации.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
					
					ОБЪЕДИНИТЬ ВСЕ
					
					ВЫБРАТЬ
						СостояниеРаботниковОрганизацииСрезПоследних.Сотрудник.Физлицо,
						СостояниеРаботниковОрганизацииСрезПоследних.Сотрудник,
						СостояниеРаботниковОрганизацииСрезПоследних.Организация,
						СостояниеРаботниковОрганизацииСрезПоследних.Регистратор,
						ВЫБОР
							КОГДА СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
								ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
							ИНАЧЕ СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения
						КОНЕЦ,
						СостояниеРаботниковОрганизацииСрезПоследних.Период
					ИЗ
						РегистрСведений.СостояниеРаботниковОрганизаций.СрезПоследних(&amp;НачалоПериода, ) КАК СостояниеРаботниковОрганизацииСрезПоследних
					ГДЕ
						ВЫБОР
								КОГДА &amp;НачалоПериода &gt;= СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения
										И СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
									ТОГДА СостояниеРаботниковОрганизацииСрезПоследних.СостояниеЗавершения
								ИНАЧЕ СостояниеРаботниковОрганизацииСрезПоследних.Состояние
							КОНЕЦ = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботникаОрганизации.ОтпускЕжегодный)) КАК ДатыУходаВОтпуск
						ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
							ДатыУходаВОтпуск.Сотрудник.Физлицо КАК СотрудникФизлицо,
							ДатыУходаВОтпуск.Сотрудник КАК Сотрудник,
							ДатыУходаВОтпуск.Организация КАК Организация,
							ДатыУходаВОтпуск.НачалоИнтервала КАК НачалоИнтервала,
							ВЫБОР
								КОГДА ДатыУходаВОтпуск.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
									ТОГДА ВЫБОР
											КОГДА МИНИМУМ(СостояниеРаботниковОрганизации.Период) ЕСТЬ NULL 
												ТОГДА ДатыУходаВОтпуск.ПериодЗавершения
											ИНАЧЕ ВЫБОР
													КОГДА ДатыУходаВОтпуск.ПериодЗавершения &lt; МИНИМУМ(СостояниеРаботниковОрганизации.Период)
														ТОГДА ДатыУходаВОтпуск.ПериодЗавершения
													ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(СостояниеРаботниковОрганизации.Период), СЕКУНДА, -1)
												КОНЕЦ
										КОНЕЦ
								ИНАЧЕ ДОБАВИТЬКДАТЕ(МИНИМУМ(СостояниеРаботниковОрганизации.Период), СЕКУНДА, -1)
							КОНЕЦ КАК КонецИнтервала
						ИЗ
							(ВЫБРАТЬ
								СостояниеРаботниковОрганизации.Сотрудник.Физлицо КАК ФизЛицо,
								СостояниеРаботниковОрганизации.Сотрудник КАК Сотрудник,
								СостояниеРаботниковОрганизации.Организация КАК Организация,
								СостояниеРаботниковОрганизации.Регистратор КАК Регистратор,
								ВЫБОР
									КОГДА СостояниеРаботниковОрганизации.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
										ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковОрганизации.ПериодЗавершения, ДЕНЬ, -1)
									ИНАЧЕ СостояниеРаботниковОрганизации.ПериодЗавершения
								КОНЕЦ КАК ПериодЗавершения,
								СостояниеРаботниковОрганизации.Период КАК НачалоИнтервала
							ИЗ
								РегистрСведений.СостояниеРаботниковОрганизаций КАК СостояниеРаботниковОрганизации
							ГДЕ
								СостояниеРаботниковОрганизации.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботникаОрганизации.ОтпускЕжегодный)
								И СостояниеРаботниковОрганизации.Период МЕЖДУ &amp;ДатаПослеНачала И &amp;КонецПериода
							
							ОБЪЕДИНИТЬ ВСЕ
							
							ВЫБРАТЬ
								СостояниеРаботниковОрганизацииСрезПоследних.Сотрудник.Физлицо,
								СостояниеРаботниковОрганизацииСрезПоследних.Сотрудник,
								СостояниеРаботниковОрганизацииСрезПоследних.Организация,
								СостояниеРаботниковОрганизацииСрезПоследних.Регистратор,
								ВЫБОР
									КОГДА СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
										ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
									ИНАЧЕ СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения
								КОНЕЦ,
								СостояниеРаботниковОрганизацииСрезПоследних.Период
							ИЗ
								РегистрСведений.СостояниеРаботниковОрганизаций.СрезПоследних(&amp;НачалоПериода, ) КАК СостояниеРаботниковОрганизацииСрезПоследних
							ГДЕ
								ВЫБОР
										КОГДА &amp;НачалоПериода &gt;= СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения
												И СостояниеРаботниковОрганизацииСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
											ТОГДА СостояниеРаботниковОрганизацииСрезПоследних.СостояниеЗавершения
										ИНАЧЕ СостояниеРаботниковОрганизацииСрезПоследних.Состояние
									КОНЕЦ = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботникаОрганизации.ОтпускЕжегодный)) КАК ДатыУходаВОтпуск
								ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СостояниеРаботниковОрганизаций КАК СостояниеРаботниковОрганизации
								ПО (СостояниеРаботниковОрганизации.Сотрудник = ДатыУходаВОтпуск.Сотрудник)
									И (СостояниеРаботниковОрганизации.Период &gt; ДатыУходаВОтпуск.НачалоИнтервала)
						
						СГРУППИРОВАТЬ ПО
							ДатыУходаВОтпуск.Сотрудник.Физлицо,
							ДатыУходаВОтпуск.Сотрудник,
							ДатыУходаВОтпуск.Организация,
							ДатыУходаВОтпуск.ПериодЗавершения,
							ДатыУходаВОтпуск.НачалоИнтервала) КАК ДатыВозврата
						ПО (ДатыВозврата.Сотрудник = ДатыУходаВОтпуск.Сотрудник)
							И (ДатыВозврата.НачалоИнтервала = ДатыУходаВОтпуск.НачалоИнтервала)) КАК Основная
			{ГДЕ
				Основная.ФизЛицо.* КАК Физлицо,
				Основная.Регистратор.* КАК Регистратор,
				Основная.НачалоИнтервала,
				Основная.КонецИнтервала,
				("Факт") КАК Серия,
				("ПоРеглУчету") КАК Учет}) КАК Факт
			ПО Основная.ФизЛицо = Факт.ФизЛицо
				И Основная.Сотрудник = Факт.Сотрудник
				И Основная.Организация = Факт.Организация
				И Основная.НачалоИнтервала = Факт.НачалоИнтервала
				И Основная.КонецИнтервала = Факт.КонецИнтервала
	ГДЕ
		Основная.Сотрудник ЕСТЬ НЕ NULL 
	{ГДЕ
		Основная.ФизЛицо.* КАК Физлицо,
		Основная.Регистратор.* КАК Регистратор,
		Основная.НачалоИнтервала,
		Основная.КонецИнтервала,
		("План") КАК Серия,
		("ПоРеглУчету") КАК Учет,
		(ВЫБОР
				КОГДА (НЕ Факт.ФизЛицо ЕСТЬ NULL )
					ТОГДА ИСТИНА
				ИНАЧЕ ЛОЖЬ
			КОНЕЦ) КАК ПланИФактСовпадают,
		("Утвержден") КАК Состояние,
		("") КАК ВидЕжегодногоОтпуска,
		Основная.Сотрудник.*}) КАК ГрафикОтпусковРаботниковОрганизаций
{ГДЕ
	ГрафикОтпусковРаботниковОрганизаций.ФизЛицо.*,
	ГрафикОтпусковРаботниковОрганизаций.Регистратор.*,
	ГрафикОтпусковРаботниковОрганизаций.НачалоИнтервала,
	ГрафикОтпусковРаботниковОрганизаций.КонецИнтервала,
	ГрафикОтпусковРаботниковОрганизаций.Серия,
	ГрафикОтпусковРаботниковОрганизаций.Учет,
	ГрафикОтпусковРаботниковОрганизаций.ПланИФактСовпадают,
	ГрафикОтпусковРаботниковОрганизаций.Состояние,
	ГрафикОтпусковРаботниковОрганизаций.ВидЕжегодногоОтпуска,
	ГрафикОтпусковРаботниковОрганизаций.Сотрудник.*}</query>
			<autoFillFields>false</autoFillFields>
		</item>
		<item xsi:type="DataSetQuery">
			<name>ФактическиеОтпускаРаботниковОрганизаций</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>КонецИнтервала</dataPath>
				<field>КонецИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Конец интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>НачалоИнтервала</dataPath>
				<field>НачалоИнтервала</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Начало интервала</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Регистратор</dataPath>
				<field>Регистратор</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Регистратор</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Серия</dataPath>
				<field>Серия</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Серия</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ФизЛицо</dataPath>
				<field>ФизЛицо</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Физ лицо</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Учет</dataPath>
				<field>Учет</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Учет</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЕжегодногоОтпуска</dataPath>
				<field>ВидЕжегодногоОтпуска</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ежегодного отпуска</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Сотрудник</dataPath>
				<field>Сотрудник</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Сотрудник</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПланИФактСовпадают</dataPath>
				<field>ПланИФактСовпадают</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>План и факт совпадают</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Состояние</dataPath>
				<field>Состояние</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Состояние</v8:content>
					</v8:item>
				</title>
			</field>
			<dataSource>ИнформационнаяБаза</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ФактическиеОтпускаРаботниковОрганизаций.ФизЛицо КАК ФизЛицо,
	ФактическиеОтпускаРаботниковОрганизаций.Регистратор КАК Регистратор,
	ФактическиеОтпускаРаботниковОрганизаций.НачалоИнтервала КАК НачалоИнтервала,
	ФактическиеОтпускаРаботниковОрганизаций.КонецИнтервала КАК КонецИнтервала,
	ФактическиеОтпускаРаботниковОрганизаций.Серия КАК Серия,
	ФактическиеОтпускаРаботниковОрганизаций.Учет КАК Учет,
	ФактическиеОтпускаРаботниковОрганизаций.ВидЕжегодногоОтпуска КАК ВидЕжегодногоОтпуска,
	ФактическиеОтпускаРаботниковОрганизаций.Сотрудник КАК Сотрудник,
	ЛОЖЬ КАК ПланИФактСовпадают,
	"" КАК Состояние
{ВЫБРАТЬ
	ФизЛицо.*,
	Регистратор.*,
	НачалоИнтервала,
	КонецИнтервала,
	Серия,
	Учет,
	ВидЕжегодногоОтпуска.*,
	Сотрудник.*,
	ПланИФактСовпадают,
	Состояние}
ИЗ
	(ВЫБРАТЬ
		Основная.ФизЛицо КАК ФизЛицо,
		Основная.Регистратор КАК Регистратор,
		НАЧАЛОПЕРИОДА(Основная.НачалоИнтервала, ДЕНЬ) КАК НачалоИнтервала,
		КОНЕЦПЕРИОДА(Основная.КонецИнтервала, ДЕНЬ) КАК КонецИнтервала,
		"Факт" КАК Серия,
		"ПоРеглУчету" КАК Учет,
		Основная.ВидЕжегодногоОтпуска КАК ВидЕжегодногоОтпуска,
		Основная.Сотрудник КАК Сотрудник
	ИЗ
		(ВЫБРАТЬ
			ФактическиеОтпускаОрганизаций.Сотрудник.Физлицо КАК ФизЛицо,
			ФактическиеОтпускаОрганизаций.Сотрудник КАК Сотрудник,
			ФактическиеОтпускаОрганизаций.Регистратор КАК Регистратор,
			ФактическиеОтпускаОрганизаций.Период КАК НачалоИнтервала,
			ВЫБОР
				КОГДА ФактическиеОтпускаОрганизаций.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
					ТОГДА &amp;ТекущаяДата
				ИНАЧЕ ФактическиеОтпускаОрганизаций.ДатаОкончания
			КОНЕЦ КАК КонецИнтервала,
			ФактическиеОтпускаОрганизаций.ВидЕжегодногоОтпуска КАК ВидЕжегодногоОтпуска
		ИЗ
			РегистрНакопления.ФактическиеОтпускаОрганизаций КАК ФактическиеОтпускаОрганизаций
		ГДЕ
			ФактическиеОтпускаОрганизаций.Период &lt;= &amp;КонецПериода
			И ВЫБОР
					КОГДА ФактическиеОтпускаОрганизаций.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
						ТОГДА &amp;ТекущаяДата
					ИНАЧЕ ФактическиеОтпускаОрганизаций.ДатаОкончания
				КОНЕЦ &gt;= &amp;НачалоПериода
			И (НЕ ФактическиеОтпускаОрганизаций.Компенсация)
			И ФактическиеОтпускаОрганизаций.Количество &gt; 0) КАК Основная
	ГДЕ
		Основная.Сотрудник.Наименование ЕСТЬ НЕ NULL 
	{ГДЕ
		Основная.ФизЛицо.* КАК Физлицо,
		Основная.Регистратор.* КАК Регистратор,
		Основная.НачалоИнтервала,
		Основная.КонецИнтервала,
		("Факт") КАК Серия,
		("ПоРеглУчету") КАК Учет,
		Основная.ВидЕжегодногоОтпуска.*,
		Основная.Сотрудник.*}) КАК ФактическиеОтпускаРаботниковОрганизаций
{ГДЕ
	ФактическиеОтпускаРаботниковОрганизаций.ФизЛицо.*,
	ФактическиеОтпускаРаботниковОрганизаций.Регистратор.*,
	ФактическиеОтпускаРаботниковОрганизаций.НачалоИнтервала,
	ФактическиеОтпускаРаботниковОрганизаций.КонецИнтервала,
	ФактическиеОтпускаРаботниковОрганизаций.Серия,
	ФактическиеОтпускаРаботниковОрганизаций.Учет,
	ФактическиеОтпускаРаботниковОрганизаций.ВидЕжегодногоОтпуска.*,
	ФактическиеОтпускаРаботниковОрганизаций.Сотрудник.*,
	(ЛОЖЬ) КАК ПланИФактСовпадают,
	("") КАК Состояние}</query>
			<autoFillFields>false</autoFillFields>
		</item>
	</dataSet>
	<dataSet xsi:type="DataSetObject">
		<name>ОписаниеОтпусков</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сотрудник</dataPath>
			<field>Сотрудник</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сотрудник</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>НачалоИнтервала</dataPath>
			<field>НачалоИнтервала</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Начало интервала</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонецИнтервала</dataPath>
			<field>КонецИнтервала</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Конец интервала</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Описание</dataPath>
			<field>Описание</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Описание</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДнейОтпуска</dataPath>
			<field>ДнейОтпуска</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Кол-во дней отпуска</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>2</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОтпускАвансом</dataPath>
			<field>ОтпускАвансом</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Кол-во дней отпуск в счет будущего периода</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<condition>true</condition>
			</useRestriction>
			<attributeUseRestriction>
				<condition>true</condition>
			</attributeUseRestriction>
			<valueType>
				<v8:Type>xs:decimal</v8:Type>
				<v8:NumberQualifiers>
					<v8:Digits>15</v8:Digits>
					<v8:FractionDigits>2</v8:FractionDigits>
					<v8:AllowedSign>Any</v8:AllowedSign>
				</v8:NumberQualifiers>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЕжегодногоОтпуска</dataPath>
			<field>ВидЕжегодногоОтпуска</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид ежегодного отпуска</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Учет</dataPath>
			<field>Учет</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Учет</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИнформационнаяБаза</dataSource>
		<objectName>ОписаниеОтпусков</objectName>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>Руководители</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ФизическоеЛицо</dataPath>
			<field>ФизическоеЛицо</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Физическое лицо</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Руководитель</dataPath>
			<field>Руководитель</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Руководитель</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:boolean</v8:Type>
			</valueType>
			<availableValue>
				<value xsi:type="xs:boolean">false</value>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:boolean">true</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Руководитель</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<dataSource>ИнформационнаяБаза</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ОтветственныеЛицаСрезПоследних.ФизЛицо КАК ФизическоеЛицо,
	ИСТИНА КАК Руководитель
{ВЫБРАТЬ
	ФизическоеЛицо.*,
	Руководитель}
ИЗ
	РегистрСведений.ОтветственныеЛица.СрезПоследних(&amp;КонецПериода, ) КАК ОтветственныеЛицаСрезПоследних
{ГДЕ
	ОтветственныеЛицаСрезПоследних.ФизЛицо.* КАК ФизическоеЛицо,
	(ИСТИНА) КАК Руководитель}</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>РаботникиОрганизации</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГоловнаяОрганизация</dataPath>
			<field>ГоловнаяОрганизация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Головная организация</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Организация</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Организации</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СотрудникРегл</dataPath>
			<field>Сотрудник</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сотрудник регл</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ФизЛицо</dataPath>
			<field>ФизЛицо</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Физ лицо</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Должность</dataPath>
			<field>Должность</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Должность компании</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Подразделение компании</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.Подразделения</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПодразделениеОрганизации</dataPath>
			<field>ПодразделениеОрганизации</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Подразделение организации</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.ПодразделенияОрганизаций</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДолжностьОрганизации</dataPath>
			<field>ДолжностьОрганизации</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Должность организации</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаУвольненияРегл</dataPath>
			<field>ДатаУвольненияРегл</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата увольнения регл</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаУвольненияУпр</dataPath>
			<field>ДатаУвольненияУпр</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата увольнения упр</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<dataSource>ИнформационнаяБаза</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	РаботникиСрезПоследних.ФизЛицо КАК ФизЛицо,
	РаботникиСрезПоследних.Подразделение КАК Подразделение,
	РаботникиСрезПоследних.Должность КАК Должность,
	Сотрудники.Сотрудник КАК Сотрудник,
	РаботникиСрезПоследних.ПричинаИзмененияСостояния,
	РаботникиСрезПоследних.Период
ПОМЕСТИТЬ УпрСотрудники
ИЗ
	(ВЫБРАТЬ
		МАКСИМУМ(СписокСотрудников.Сотрудник) КАК Сотрудник,
		СписокСотрудников.Физлицо КАК Физлицо
	ИЗ
		(ВЫБРАТЬ
			МАКСИМУМ(РаботникиОсновноеМесто.Сотрудник) КАК Сотрудник,
			РаботникиОсновноеМесто.Сотрудник.Физлицо КАК Физлицо,
			ВЫБОР
				КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
					ТОГДА 1
				ИНАЧЕ 3
			КОНЕЦ КАК Приоритет
		ИЗ
			РегистрСведений.РаботникиОрганизаций.СрезПоследних(
					&amp;ДатаСведений,
					Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
						И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ОсновноеМестоРаботы)) КАК РаботникиОсновноеМесто
		
		СГРУППИРОВАТЬ ПО
			РаботникиОсновноеМесто.Сотрудник.Физлицо,
			ВЫБОР
				КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
					ТОГДА 1
				ИНАЧЕ 3
			КОНЕЦ
		
		ОБЪЕДИНИТЬ
		
		ВЫБРАТЬ
			МАКСИМУМ(РаботникиСовместительство.Сотрудник),
			РаботникиСовместительство.Сотрудник.Физлицо,
			ВЫБОР
				КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
					ТОГДА 2
				ИНАЧЕ 3
			КОНЕЦ
		ИЗ
			РегистрСведений.РаботникиОрганизаций.СрезПоследних(
					&amp;ДатаСведений,
					Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
						И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.Совместительство)) КАК РаботникиСовместительство
		
		СГРУППИРОВАТЬ ПО
			РаботникиСовместительство.Сотрудник.Физлицо,
			ВЫБОР
				КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
					ТОГДА 2
				ИНАЧЕ 3
			КОНЕЦ
		
		ОБЪЕДИНИТЬ
		
		ВЫБРАТЬ
			МАКСИМУМ(СотрудникиДУ.Ссылка),
			СотрудникиДУ.Физлицо,
			4
		ИЗ
			Справочник.СотрудникиОрганизаций КАК СотрудникиДУ
		ГДЕ
			(СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ДоговорУправленческий)
					ИЛИ СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор))
		
		СГРУППИРОВАТЬ ПО
			СотрудникиДУ.Физлицо) КАК СписокСотрудников
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
				СписокФизическихЛиц.Физлицо КАК Физлицо,
				МИНИМУМ(СписокФизическихЛиц.Приоритет) КАК Приоритет
			ИЗ
				(ВЫБРАТЬ
					РаботникиОсновноеМесто.Сотрудник.Физлицо КАК Физлицо,
					ВЫБОР
						КОГДА РаботникиОсновноеМесто.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
							ТОГДА 1
						ИНАЧЕ 3
					КОНЕЦ КАК Приоритет
				ИЗ
					РегистрСведений.РаботникиОрганизаций.СрезПоследних(
							&amp;ДатаСведений,
							Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
								И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ОсновноеМестоРаботы)) КАК РаботникиОсновноеМесто
				
				ОБЪЕДИНИТЬ
				
				ВЫБРАТЬ
					РаботникиСовместительство.Сотрудник.Физлицо,
					ВЫБОР
						КОГДА РаботникиСовместительство.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
							ТОГДА 2
						ИНАЧЕ 3
					КОНЕЦ
				ИЗ
					РегистрСведений.РаботникиОрганизаций.СрезПоследних(
							&amp;ДатаСведений,
							Сотрудник.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор)
								И Сотрудник.ВидЗанятости = ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.Совместительство)) КАК РаботникиСовместительство
				
				ОБЪЕДИНИТЬ
				
				ВЫБРАТЬ
					СотрудникиДУ.Физлицо,
					4
				ИЗ
					Справочник.СотрудникиОрганизаций КАК СотрудникиДУ
				ГДЕ
					(СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ДоговорУправленческий)
							ИЛИ СотрудникиДУ.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровСФизЛицами.ТрудовойДоговор))) КАК СписокФизическихЛиц
			
			СГРУППИРОВАТЬ ПО
				СписокФизическихЛиц.Физлицо) КАК СписокФизическихЛиц
			ПО СписокСотрудников.Физлицо = СписокФизическихЛиц.Физлицо
				И СписокСотрудников.Приоритет = СписокФизическихЛиц.Приоритет
	{ГДЕ
		СписокСотрудников.Сотрудник.*,
		СписокСотрудников.Физлицо.*}
	
	СГРУППИРОВАТЬ ПО
		СписокСотрудников.Физлицо) КАК Сотрудники
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Работники.СрезПоследних(&amp;КонецПериода, ) КАК РаботникиСрезПоследних
		ПО Сотрудники.Физлицо = РаботникиСрезПоследних.ФизЛицо
{ГДЕ
	РаботникиСрезПоследних.ФизЛицо.*,
	Сотрудники.Сотрудник.*}
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	РаботникиОрганизацийСрезПоследних.Период,
	РаботникиОрганизацийСрезПоследних.Сотрудник,
	РаботникиОрганизацийСрезПоследних.Организация,
	РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделение,
	РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизации,
	РаботникиОрганизацийСрезПоследних.Должность,
	РаботникиОрганизацийСрезПоследних.ПериодЗавершения,
	РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделениеЗавершения,
	РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизацииЗавершения,
	РаботникиОрганизацийСрезПоследних.ДолжностьЗавершения,
	РаботникиОрганизацийСрезПоследних.ПричинаИзмененияСостояния,
	РаботникиОрганизацийСрезПоследних.ПричинаИзмененияСостоянияЗавершения
ПОМЕСТИТЬ РаботникиОрганизацийСрезПоследних
ИЗ
	РегистрСведений.РаботникиОрганизаций.СрезПоследних(&amp;КонецПериода, ) КАК РаботникиОрганизацийСрезПоследних
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	РаботникиОрганизации.Сотрудник КАК Сотрудник,
	РаботникиОрганизации.ГоловнаяОрганизация КАК ГоловнаяОрганизация,
	РаботникиОрганизации.Подразделение КАК Подразделение,
	РаботникиОрганизации.Организация КАК Организация,
	РаботникиОрганизации.Должность КАК Должность,
	РаботникиОрганизации.ФизЛицо КАК ФизЛицо,
	РаботникиОрганизации.ПодразделениеОрганизации КАК ПодразделениеОрганизации,
	РаботникиОрганизации.ДолжностьОрганизации КАК ДолжностьОрганизации,
	РаботникиОрганизации.ДатаУвольненияРегл КАК ДатаУвольненияРегл,
	РаботникиОрганизации.ДатаУвольненияУпр КАК ДатаУвольненияУпр
{ВЫБРАТЬ
	Сотрудник.*,
	ГоловнаяОрганизация.*,
	Подразделение.*,
	Организация.*,
	Должность.*,
	ФизЛицо.*,
	ПодразделениеОрганизации.*,
	ДолжностьОрганизации.*,
	ДатаУвольненияРегл,
	ДатаУвольненияУпр}
ИЗ
	(ВЫБРАТЬ
		СотрудникиОрганизаций.Ссылка КАК Сотрудник,
		РаботникиОрганизацийСрезПоследних.Организация КАК ГоловнаяОрганизация,
		ВЫБОР
			КОГДА УпрСотрудники.Подразделение ЕСТЬ НЕ NULL 
				ТОГДА УпрСотрудники.Подразделение
			ИНАЧЕ "&lt;Подразделение компании не указано&gt;"
		КОНЕЦ КАК Подразделение,
		ВЫБОР
			КОГДА РаботникиОрганизацийСрезПоследних.Сотрудник ЕСТЬ НЕ NULL 
				ТОГДА ВЫБОР
						КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
								И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							ТОГДА РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделениеЗавершения
						ИНАЧЕ РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделение
					КОНЕЦ
			ИНАЧЕ "&lt;Организация не указана&gt;"
		КОНЕЦ КАК Организация,
		ВЫБОР
			КОГДА УпрСотрудники.Должность ЕСТЬ НЕ NULL 
				ТОГДА УпрСотрудники.Должность
			ИНАЧЕ "&lt;Должность компании не указано&gt;"
		КОНЕЦ КАК Должность,
		РаботникиОрганизацийСрезПоследних.Сотрудник.Физлицо КАК ФизЛицо,
		ВЫБОР
			КОГДА РаботникиОрганизацийСрезПоследних.Сотрудник ЕСТЬ НЕ NULL 
				ТОГДА ВЫБОР
						КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
								И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							ТОГДА РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизацииЗавершения
						ИНАЧЕ РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизации
					КОНЕЦ
			ИНАЧЕ "&lt;Подраздление организации не указано&gt;"
		КОНЕЦ КАК ПодразделениеОрганизации,
		ВЫБОР
			КОГДА РаботникиОрганизацийСрезПоследних.Сотрудник ЕСТЬ НЕ NULL 
				ТОГДА ВЫБОР
						КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
								И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							ТОГДА РаботникиОрганизацийСрезПоследних.ДолжностьЗавершения
						ИНАЧЕ РаботникиОрганизацийСрезПоследних.Должность
					КОНЕЦ
			ИНАЧЕ "&lt;Должность организации не указано&gt;"
		КОНЕЦ КАК ДолжностьОрганизации,
		ВЫБОР
			КОГДА РаботникиОрганизацийСрезПоследних.ПричинаИзмененияСостояния ЕСТЬ NULL 
				ТОГДА NULL
			КОГДА ВЫБОР
					КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
							И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
						ТОГДА РаботникиОрганизацийСрезПоследних.ПричинаИзмененияСостоянияЗавершения
					ИНАЧЕ РаботникиОрганизацийСрезПоследних.ПричинаИзмененияСостояния
				КОНЕЦ = ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
				ТОГДА ВЫБОР
						КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
								И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							ТОГДА ДОБАВИТЬКДАТЕ(РаботникиОрганизацийСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
						ИНАЧЕ ДОБАВИТЬКДАТЕ(РаботникиОрганизацийСрезПоследних.Период, ДЕНЬ, -1)
					КОНЕЦ
			ИНАЧЕ ДАТАВРЕМЯ(1, 1, 1)
		КОНЕЦ КАК ДатаУвольненияРегл,
		ВЫБОР
			КОГДА УпрСотрудники.ПричинаИзмененияСостояния ЕСТЬ NULL 
				ТОГДА NULL
			КОГДА УпрСотрудники.ПричинаИзмененияСостояния = ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение)
				ТОГДА ДОБАВИТЬКДАТЕ(УпрСотрудники.Период, ДЕНЬ, -1)
			ИНАЧЕ ДАТАВРЕМЯ(1, 1, 1)
		КОНЕЦ КАК ДатаУвольненияУпр
	ИЗ
		Справочник.СотрудникиОрганизаций КАК СотрудникиОрганизаций
			ЛЕВОЕ СОЕДИНЕНИЕ УпрСотрудники КАК УпрСотрудники
			ПО СотрудникиОрганизаций.Ссылка = УпрСотрудники.Сотрудник
			ЛЕВОЕ СОЕДИНЕНИЕ РаботникиОрганизацийСрезПоследних КАК РаботникиОрганизацийСрезПоследних
			ПО СотрудникиОрганизаций.Ссылка = РаботникиОрганизацийСрезПоследних.Сотрудник
	ГДЕ
		(НЕ СотрудникиОрганизаций.ЭтоГруппа)
		И (РаботникиОрганизацийСрезПоследних.Сотрудник ЕСТЬ НЕ NULL 
				ИЛИ УпрСотрудники.Сотрудник ЕСТЬ НЕ NULL )
		И СотрудникиОрганизаций.Наименование ЕСТЬ НЕ NULL 
	{ГДЕ
		РаботникиОрганизацийСрезПоследних.Организация КАК ГоловнаяОрганизация,
		(ВЫБОР
				КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
						И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
					ТОГДА РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделениеЗавершения
				ИНАЧЕ РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделение
			КОНЕЦ) КАК Организация,
		(ВЫБОР
				КОГДА РаботникиОрганизацийСрезПоследних.Сотрудник ЕСТЬ НЕ NULL 
					ТОГДА ВЫБОР
							КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
									И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
								ТОГДА РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизацииЗавершения
							ИНАЧЕ РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизации
						КОНЕЦ
				ИНАЧЕ ЗНАЧЕНИЕ(Справочник.ПодразделенияОрганизаций.ПустаяСсылка)
			КОНЕЦ).* КАК ПодразделениеОрганизации,
		(ВЫБОР
				КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt; &amp;КонецПериода
						И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
					ТОГДА РаботникиОрганизацийСрезПоследних.ДолжностьЗавершения
				ИНАЧЕ РаботникиОрганизацийСрезПоследних.Должность
			КОНЕЦ) КАК ДолжностьОрганизации,
		УпрСотрудники.Должность,
		(ВЫБОР
				КОГДА УпрСотрудники.Подразделение ЕСТЬ НЕ NULL 
					ТОГДА УпрСотрудники.Подразделение
				ИНАЧЕ ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
			КОНЕЦ).* КАК Подразделение}) КАК РаботникиОрганизации
{ГДЕ
	РаботникиОрганизации.Сотрудник.*,
	РаботникиОрганизации.ГоловнаяОрганизация.*,
	РаботникиОрганизации.Подразделение.*,
	РаботникиОрганизации.Организация.*,
	РаботникиОрганизации.Должность.*,
	РаботникиОрганизации.ФизЛицо.*,
	РаботникиОрганизации.ПодразделениеОрганизации.*,
	РаботникиОрганизации.ДолжностьОрганизации.*}</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>РуководителиОрганизации</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ФизическоеЛицо</dataPath>
			<field>ФизическоеЛицо</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Физическое лицо</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РуководительОрганизации</dataPath>
			<field>РуководительОрганизации</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Руководитель организации</v8:content>
				</v8:item>
			</title>
			<valueType>
				<v8:Type>xs:boolean</v8:Type>
			</valueType>
			<availableValue>
				<value xsi:type="xs:boolean">false</value>
			</availableValue>
			<availableValue>
				<value xsi:type="xs:boolean">true</value>
				<presentation xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Руководитель</v8:content>
					</v8:item>
				</presentation>
			</availableValue>
		</field>
		<dataSource>ИнформационнаяБаза</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ОтветственныеЛицаОрганизацийСрезПоследних.ФизическоеЛицо КАК ФизическоеЛицо,
	ИСТИНА КАК РуководительОрганизации
{ВЫБРАТЬ
	ФизическоеЛицо.*,
	РуководительОрганизации}
ИЗ
	РегистрСведений.ОтветственныеЛицаОрганизаций.СрезПоследних(&amp;КонецПериода, ) КАК ОтветственныеЛицаОрганизацийСрезПоследних
ГДЕ
	(ОтветственныеЛицаОрганизацийСрезПоследних.ОтветственноеЛицо = ЗНАЧЕНИЕ(Перечисление.ОтветственныеЛицаОрганизаций.Руководитель)
			ИЛИ ОтветственныеЛицаОрганизацийСрезПоследних.ОтветственноеЛицо = ЗНАЧЕНИЕ(Перечисление.ОтветственныеЛицаОрганизаций.ГлавныйБухгалтер)
			ИЛИ ОтветственныеЛицаОрганизацийСрезПоследних.ОтветственноеЛицо = ЗНАЧЕНИЕ(Перечисление.ОтветственныеЛицаОрганизаций.РуководительКадровойСлужбы))
{ГДЕ
	ОтветственныеЛицаОрганизацийСрезПоследних.ФизическоеЛицо.*,
	(ИСТИНА) КАК РуководительОрганизации}
</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>ОписаниеОтпусков</destinationDataSet>
		<sourceExpression>Сотрудник</sourceExpression>
		<destinationExpression>Сотрудник</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>ОписаниеОтпусков</destinationDataSet>
		<sourceExpression>НачалоИнтервала</sourceExpression>
		<destinationExpression>НачалоИнтервала</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>ОписаниеОтпусков</destinationDataSet>
		<sourceExpression>КонецИнтервала</sourceExpression>
		<destinationExpression>КонецИнтервала</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>Руководители</destinationDataSet>
		<sourceExpression>ФизЛицо</sourceExpression>
		<destinationExpression>ФизическоеЛицо</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>ОписаниеОтпусков</destinationDataSet>
		<sourceExpression>ВидЕжегодногоОтпуска</sourceExpression>
		<destinationExpression>ВидЕжегодногоОтпуска</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>РаботникиОрганизации</destinationDataSet>
		<sourceExpression>Сотрудник</sourceExpression>
		<destinationExpression>СотрудникРегл</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>ОписаниеОтпусков</destinationDataSet>
		<sourceExpression>Учет</sourceExpression>
		<destinationExpression>Учет</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Данные</sourceDataSet>
		<destinationDataSet>РуководителиОрганизации</destinationDataSet>
		<sourceExpression>ФизЛицо</sourceExpression>
		<destinationExpression>ФизическоеЛицо</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>РаботникиОрганизации</sourceDataSet>
		<destinationDataSet>РуководителиОрганизации</destinationDataSet>
		<sourceExpression>ФизЛицо</sourceExpression>
		<destinationExpression>ФизическоеЛицо</destinationExpression>
	</dataSetLink>
	<calculatedField>
		<dataPath>Описание</dataPath>
		<expression>ВЫБОР КОГДА Серия = "План" И Учет = "ПоРеглУчету" ТОГДА "" ИНАЧЕ Описание КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Описание</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<condition>true</condition>
		</useRestriction>
	</calculatedField>
	<calculatedField>
		<dataPath>Уволен</dataPath>
		<expression>ВЫБОР 
КОГДА Учет = "ПоУпрУчету" И НачалоИнтервала &gt; ЕСТЬNULL(ДатаУвольненияУпр, ДатаУвольненияРегл) И ЕСТЬNULL(ДатаУвольненияУпр, ДатаУвольненияРегл) &lt;&gt; ДАТАВРЕМЯ(1,1,1)
ТОГДА ИСТИНА 
КОГДА Учет = "ПоРеглУчету" И НачалоИнтервала &gt; ЕСТЬNULL(ДатаУвольненияРегл, ДатаУвольненияУпр) И ЕСТЬNULL(ДатаУвольненияРегл, ДатаУвольненияУпр) &lt;&gt; ДАТАВРЕМЯ(1,1,1)
ТОГДА ИСТИНА
ИНАЧЕ ЛОЖЬ КОНЕЦ

</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Уволен</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<field>true</field>
			<group>true</group>
			<order>true</order>
		</useRestriction>
	</calculatedField>
	<totalField>
		<dataPath>ОтпускАвансом</dataPath>
		<expression>Сумма(ОтпускАвансом)</expression>
	</totalField>
	<totalField>
		<dataPath>ДнейОтпуска</dataPath>
		<expression>Сумма(ДнейОтпуска)</expression>
	</totalField>
	<parameter>
		<name>ДатаПослеНачала</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата после начала</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<expression>ДОБАВИТЬКДАТЕ(&amp;НачалоПериода, "СЕКУНДА", 1)</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ТекущаяДата</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текущая дата</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>КонецПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Конец периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>НачалоПериода</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Начало периода</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ДатаСведений</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата сведений</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Сотрудник</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>НачалоИнтервала</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонецИнтервала</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Описание</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Организация</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Организации.</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Подразделение</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Подразделения.</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ФизЛицо</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ФизическиеЛица.</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">Уволен</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:boolean">false</dcsset:right>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection/>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">Серия</dcsset:left>
							<dcsset:comparisonType>Contains</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:string">Факт</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">style:ФактическийПоказатель</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:use>false</dcscor:use>
							<dcscor:parameter>ЦветТекста</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">auto</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection/>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">Серия</dcsset:left>
							<dcsset:comparisonType>Contains</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:string">План</dcsset:right>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">Состояние</dcsset:left>
							<dcsset:comparisonType>Equal</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:string">Утвержден</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">style:ПлановыйУтвержденныйПоказатель</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection/>
					<dcsset:filter>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">Серия</dcsset:left>
							<dcsset:comparisonType>Contains</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:string">План</dcsset:right>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:FilterItemComparison">
							<dcsset:left xsi:type="dcscor:Field">Состояние</dcsset:left>
							<dcsset:comparisonType>Equal</dcsset:comparisonType>
							<dcsset:right xsi:type="xs:string">Не утвержден</dcsset:right>
						</dcsset:item>
					</dcsset:filter>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">style:ПлановыйНеутвержденныйПоказатель</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>РасположениеРеквизитов</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionAttributesPlacement">Separately</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВертикальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">None</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Сведения об отпусках</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>Подразделение</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
				<dcsset:item xsi:type="dcsset:StructureItemGroup">
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:item>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>