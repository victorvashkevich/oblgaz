<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИнформационнаяБаза</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>СписокНамеченныхВстреч</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВремяНачала</dataPath>
			<field>ВремяНачала</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Занят с</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ='dd MMMM yyyy "г."'</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВремяОкончания</dataPath>
			<field>ВремяОкончания</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Занят по</v8:content>
				</v8:item>
			</title>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">ДФ='dd MMMM yyyy "г."'</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Должность</dataPath>
			<field>Должность</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Должность</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Подразделение</dataPath>
			<field>Подразделение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Подразделение</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Регистратор</dataPath>
			<field>Регистратор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Документ</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ФизЛицо</dataPath>
			<field>ФизЛицо</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Работник</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПричинаОтсутствия</dataPath>
			<field>ПричинаОтсутствия</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид занятости</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЦелоДневноеОтсутсвие</dataPath>
			<field>ЦелоДневноеОтсутсвие</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Отсутсвует весь день</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<valueType>
				<v8:Type>xs:boolean</v8:Type>
			</valueType>
			<appearance>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Формат</dcscor:parameter>
					<dcscor:value xsi:type="xs:string">БЛ=Нет; БИ=Да</dcscor:value>
				</dcscor:item>
			</appearance>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Состояние</dataPath>
			<field>Состояние</field>
		</field>
		<dataSource>ИнформационнаяБаза</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗанятостьСотрудников.ДатаОкончания КАК ВремяОкончания,
	ЗанятостьСотрудников.Период КАК ВремяНачала,
	ЗанятостьСотрудников.Регистратор КАК Регистратор,
	ВЫБОР
		КОГДА РаботникиСрезПоследних.Подразделение ЕСТЬ NULL 
				ИЛИ РаботникиСрезПоследних.Подразделение = ЗНАЧЕНИЕ(Справочник.Подразделения.ПустаяСсылка)
			ТОГДА СоответствиеПодразделенийИПодразделенийОрганизаций.Подразделение
		ИНАЧЕ РаботникиСрезПоследних.Подразделение
	КОНЕЦ КАК Подразделение,
	РаботникиСрезПоследних.Должность КАК Должность,
	ЗанятостьСотрудников.ПричинаОтсутствия КАК ПричинаОтсутствия,
	ЗанятостьСотрудников.ЦелоДневноеОтсутсвие КАК ЦелоДневноеОтсутсвие,
	ЗанятостьСотрудников.Состояние КАК Состояние,
	ЗанятостьСотрудников.ФизЛицо КАК ФизЛицо
{ВЫБРАТЬ
	ВремяОкончания,
	ВремяНачала,
	Регистратор.*,
	Подразделение.*,
	Должность.*,
	ПричинаОтсутствия.*,
	ЦелоДневноеОтсутсвие,
	Состояние.*,
	ФизЛицо.*}
ИЗ
	(ВЫБРАТЬ РАЗЛИЧНЫЕ
		СборДанныхДляПланированияЗанятостиФизлиц.ПериодЗавершения КАК ДатаОкончания,
		СборДанныхДляПланированияЗанятостиФизлиц.Регистратор КАК Регистратор,
		СборДанныхДляПланированияЗанятостиФизлиц.Период КАК Период,
		СборДанныхДляПланированияЗанятостиФизлиц.ФизЛицо КАК ФизЛицо,
		СборДанныхДляПланированияЗанятостиФизлиц.ПричинаОтсутствия КАК ПричинаОтсутствия,
		ЛОЖЬ КАК ЦелоДневноеОтсутсвие,
		СборДанныхДляПланированияЗанятостиФизлиц.Состояние КАК Состояние
	ИЗ
		РегистрСведений.СборДанныхДляПланированияЗанятостиФизлиц КАК СборДанныхДляПланированияЗанятостиФизлиц
	ГДЕ
		&amp;Период МЕЖДУ НАЧАЛОПЕРИОДА(СборДанныхДляПланированияЗанятостиФизлиц.Период, ДЕНЬ) И КОНЕЦПЕРИОДА(СборДанныхДляПланированияЗанятостиФизлиц.ПериодЗавершения, ДЕНЬ)
		И СборДанныхДляПланированияЗанятостиФизлиц.Состояние &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.Свободен)
		И СборДанныхДляПланированияЗанятостиФизлиц.Состояние &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.ОтпускЕжегодный)
	{ГДЕ
		СборДанныхДляПланированияЗанятостиФизлиц.ФизЛицо.*}
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ДОБАВИТЬКДАТЕ(СостояниеРаботников.ПериодЗавершения, ДЕНЬ, -1),
		СостояниеРаботников.Регистратор,
		СостояниеРаботников.Период,
		СостояниеРаботников.ФизЛицо,
		СостояниеРаботников.ПричинаОтсутствия,
		ИСТИНА,
		СостояниеРаботников.Состояние
	ИЗ
		РегистрСведений.СостояниеРаботников КАК СостояниеРаботников
	ГДЕ
		СостояниеРаботников.Состояние &lt;&gt; ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.Работает)
		И &amp;Период МЕЖДУ НАЧАЛОПЕРИОДА(СостояниеРаботников.Период, ДЕНЬ) И КОНЕЦПЕРИОДА(ДОБАВИТЬКДАТЕ(СостояниеРаботников.ПериодЗавершения, ДЕНЬ, -1), ДЕНЬ)
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ВЫБОР
			КОГДА СостояниеРаботниковОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
				ТОГДА ДОБАВИТЬКДАТЕ(СостояниеРаботниковОрганизацийСрезПоследних.ПериодЗавершения, ДЕНЬ, -1)
			ИНАЧЕ СостояниеРаботниковОрганизацийСрезПоследних.ПериодЗавершения
		КОНЕЦ,
		СостояниеРаботниковОрганизацийСрезПоследних.Регистратор,
		СостояниеРаботниковОрганизацийСрезПоследних.Период,
		СостояниеРаботниковОрганизацийСрезПоследних.Сотрудник.Физлицо,
		NULL,
		ИСТИНА,
		СостояниеРаботниковОрганизацийСрезПоследних.Состояние
	ИЗ
		РегистрСведений.СостояниеРаботниковОрганизаций.СрезПоследних(&amp;Период, ) КАК СостояниеРаботниковОрганизацийСрезПоследних
	ГДЕ
		&amp;Период МЕЖДУ НАЧАЛОПЕРИОДА(СостояниеРаботниковОрганизацийСрезПоследних.Период, ДЕНЬ) И КОНЕЦПЕРИОДА(СостояниеРаботниковОрганизацийСрезПоследних.ПериодЗавершения, ДЕНЬ)
		И СостояниеРаботниковОрганизацийСрезПоследних.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботникаОрганизации.ОтпускЕжегодный)
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ВЫБОР
			КОГДА СостояниеРаботниковОрганизацийСрезПервых.Период ЕСТЬ NULL 
				ТОГДА ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
			ИНАЧЕ ДОБАВИТЬКДАТЕ(СостояниеРаботниковОрганизацийСрезПервых.Период, ДЕНЬ, -1)
		КОНЕЦ,
		СостояниеРаботниковОрганизацийСрезПоследних.Регистратор,
		СостояниеРаботниковОрганизацийСрезПоследних.Период,
		СостояниеРаботниковОрганизацийСрезПоследних.Сотрудник.Физлицо,
		NULL,
		ИСТИНА,
		СостояниеРаботниковОрганизацийСрезПоследних.Состояние
	ИЗ
		РегистрСведений.СостояниеРаботниковОрганизаций.СрезПоследних(&amp;Период, ) КАК СостояниеРаботниковОрганизацийСрезПоследних
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СостояниеРаботниковОрганизаций.СрезПервых(&amp;Период, ) КАК СостояниеРаботниковОрганизацийСрезПервых
			ПО СостояниеРаботниковОрганизацийСрезПоследних.Сотрудник = СостояниеРаботниковОрганизацийСрезПервых.Сотрудник
	ГДЕ
		СостояниеРаботниковОрганизацийСрезПоследних.ПериодЗавершения = ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
		И СостояниеРаботниковОрганизацийСрезПоследних.Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботникаОрганизации.ОтпускЕжегодный)
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		ДОБАВИТЬКДАТЕ(СобытийныйПланЗанятостиФизлицСрезПоследних.ПериодЗавершения, ДЕНЬ, -1),
		СобытийныйПланЗанятостиФизлицСрезПоследних.Регистратор,
		СобытийныйПланЗанятостиФизлицСрезПоследних.Период,
		СобытийныйПланЗанятостиФизлицСрезПоследних.ФизЛицо,
		NULL,
		ИСТИНА,
		СобытийныйПланЗанятостиФизлицСрезПоследних.Состояние
	ИЗ
		РегистрСведений.СобытийныйПланЗанятостиФизлиц.СрезПоследних(&amp;Период, ) КАК СобытийныйПланЗанятостиФизлицСрезПоследних
	ГДЕ
		&amp;Период МЕЖДУ НАЧАЛОПЕРИОДА(СобытийныйПланЗанятостиФизлицСрезПоследних.Период, ДЕНЬ) И КОНЕЦПЕРИОДА(СобытийныйПланЗанятостиФизлицСрезПоследних.ПериодЗавершения, ДЕНЬ)
		И (СобытийныйПланЗанятостиФизлицСрезПоследних.Состояние = ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.Мероприятие)
				ИЛИ СобытийныйПланЗанятостиФизлицСрезПоследних.Состояние = ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.ОтпускЕжегодный))) КАК ЗанятостьСотрудников
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			МАКСИМУМ(ВЫБОР
					КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;= &amp;Период
						ТОГДА РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизацииЗавершения
					ИНАЧЕ РаботникиОрганизацийСрезПоследних.ПодразделениеОрганизации
				КОНЕЦ) КАК Подразделение,
			РаботникиОрганизацийСрезПоследних.Сотрудник.Физлицо КАК Физлицо,
			МАКСИМУМ(ВЫБОР
					КОГДА РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
							И РаботникиОрганизацийСрезПоследних.ПериодЗавершения &lt;= &amp;Период
						ТОГДА РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделениеЗавершения
					ИНАЧЕ РаботникиОрганизацийСрезПоследних.ОбособленноеПодразделение
				КОНЕЦ) КАК Организация
		ИЗ
			РегистрСведений.РаботникиОрганизаций.СрезПоследних(&amp;Период, Сотрудник.ВидЗанятости &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ВнутреннееСовместительство)) КАК РаботникиОрганизацийСрезПоследних
		
		СГРУППИРОВАТЬ ПО
			РаботникиОрганизацийСрезПоследних.Сотрудник.Физлицо) КАК ПодразделениеСотрудника
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеПодразделенийИПодразделенийОрганизаций КАК СоответствиеПодразделенийИПодразделенийОрганизаций
			ПО ПодразделениеСотрудника.Подразделение = СоответствиеПодразделенийИПодразделенийОрганизаций.ПодразделениеОрганизации
				И ПодразделениеСотрудника.Организация = СоответствиеПодразделенийИПодразделенийОрганизаций.Организация
		ПО ЗанятостьСотрудников.ФизЛицо = ПодразделениеСотрудника.Физлицо
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Работники.СрезПоследних(&amp;Период, ) КАК РаботникиСрезПоследних
		ПО ЗанятостьСотрудников.ФизЛицо = РаботникиСрезПоследних.ФизЛицо
ГДЕ
	(НЕ ЗанятостьСотрудников.ФизЛицо ЕСТЬ NULL )
{ГДЕ
	ЗанятостьСотрудников.ДатаОкончания КАК ВремяОкончания,
	ЗанятостьСотрудников.Регистратор.* КАК Регистратор,
	ЗанятостьСотрудников.Период КАК ВремяНачала,
	РаботникиСрезПоследних.Подразделение.* КАК Подразделение,
	РаботникиСрезПоследних.Должность.* КАК Должность,
	ЗанятостьСотрудников.ПричинаОтсутствия.*,
	ЗанятостьСотрудников.ЦелоДневноеОтсутсвие,
	ЗанятостьСотрудников.Состояние.*,
	ЗанятостьСотрудников.ФизЛицо.*}
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.ФизическиеЛица)
	СПИСОК (ВЫБРАТЬ
			ВидыКонтактнойИнформации.Ссылка,
			ВидыКонтактнойИнформации.Наименование,
			ВидыКонтактнойИнформации.Тип
		ИЗ
			Справочник.ВидыКонтактнойИнформации КАК ВидыКонтактнойИнформации
		ГДЕ
			ВидыКонтактнойИнформации.ВидОбъектаКонтактнойИнформации = ЗНАЧЕНИЕ(Перечисление.ВидыОбъектовКонтактнойИнформации.ФизическиеЛица)
			И (НЕ ВидыКонтактнойИнформации.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ТИПЗНАЧЕНИЯ Тип
	ЗНАЧЕНИЯ РегистрСведений.КонтактнаяИнформация
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Вид
	ЗНАЧЕНИЕ Представление }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.ФизическиеЛица)
	СПИСОК (ВЫБРАТЬ
			СвойстваОбъектов.Ссылка,
			" Дополнительное свойство: " + СвойстваОбъектов.Наименование КАК Наименование,
			СвойстваОбъектов.ТипЗначения
		ИЗ
			ПланВидовХарактеристик.СвойстваОбъектов КАК СвойстваОбъектов
		ГДЕ
			СвойстваОбъектов.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_ФизическиеЛица)
			И (НЕ СвойстваОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ТИПЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯ РегистрСведений.ЗначенияСвойствОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Свойство
	ЗНАЧЕНИЕ Значение }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.ФизическиеЛица)
	СПИСОК (ВЫБРАТЬ
			КатегорииОбъектов.Ссылка,
			" Дополнительная категория: " + КатегорииОбъектов.Наименование КАК Наименование
		ИЗ
			Справочник.КатегорииОбъектов КАК КатегорииОбъектов
		ГДЕ
			КатегорииОбъектов.НазначениеКатегории = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_ФизическиеЛица)
			И (НЕ КатегорииОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ЗНАЧЕНИЯ РегистрСведений.КатегорииОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Категория }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.Подразделения)
	СПИСОК (ВЫБРАТЬ
			СвойстваОбъектов.Ссылка,
			" Дополнительное свойство: " + СвойстваОбъектов.Наименование КАК Наименование,
			СвойстваОбъектов.ТипЗначения
		ИЗ
			ПланВидовХарактеристик.СвойстваОбъектов КАК СвойстваОбъектов
		ГДЕ
			СвойстваОбъектов.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Подразделения)
			И (НЕ СвойстваОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ТИПЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯ РегистрСведений.ЗначенияСвойствОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Свойство
	ЗНАЧЕНИЕ Значение }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.Подразделения)
	СПИСОК (ВЫБРАТЬ
			КатегорииОбъектов.Ссылка,
			" Дополнительная категория: " + КатегорииОбъектов.Наименование КАК Наименование
		ИЗ
			Справочник.КатегорииОбъектов КАК КатегорииОбъектов
		ГДЕ
			КатегорииОбъектов.НазначениеКатегории = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Подразделения)
			И (НЕ КатегорииОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ЗНАЧЕНИЯ РегистрСведений.КатегорииОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Категория }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.Подразделения)
	СПИСОК (ВЫБРАТЬ
			"Ответственное лицо" КАК Идентификатор,
			"Ответственное лицо" КАК ИмяХарактеристики)
	ИДЕНТИФИКАТОР Идентификатор
	ИМЯ ИмяХарактеристики
	ЗНАЧЕНИЯ (ВЫБРАТЬ
			ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница КАК Объект,
			"Ответственное лицо" КАК Идентификатор,
			ОтветственныеЛицаСрезПоследних.ФизЛицо КАК Значение
		ИЗ
			РегистрСведений.ОтветственныеЛица.СрезПоследних КАК ОтветственныеЛицаСрезПоследних
		ГДЕ
			ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница ССЫЛКА Справочник.Подразделения)
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Идентификатор
	ЗНАЧЕНИЕ Значение }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.ДолжностиОрганизаций)
	СПИСОК (ВЫБРАТЬ
			СвойстваОбъектов.Ссылка,
			" Дополнительное свойство: " + СвойстваОбъектов.Наименование КАК Наименование,
			СвойстваОбъектов.ТипЗначения
		ИЗ
			ПланВидовХарактеристик.СвойстваОбъектов КАК СвойстваОбъектов
		ГДЕ
			СвойстваОбъектов.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_ДолжностиОрганизаций)
			И (НЕ СвойстваОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ТИПЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯ РегистрСведений.ЗначенияСвойствОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Свойство
	ЗНАЧЕНИЕ Значение }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.ДолжностиОрганизаций)
	СПИСОК (ВЫБРАТЬ
			КатегорииОбъектов.Ссылка,
			" Дополнительная категория: " + КатегорииОбъектов.Наименование КАК Наименование
		ИЗ
			Справочник.КатегорииОбъектов КАК КатегорииОбъектов
		ГДЕ
			КатегорииОбъектов.НазначениеКатегории = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_ДолжностиОрганизаций)
			И (НЕ КатегорииОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ЗНАЧЕНИЯ РегистрСведений.КатегорииОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Категория }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.СотрудникиОрганизаций)
	СПИСОК (ВЫБРАТЬ
			КатегорииОбъектов.Ссылка,
			" Дополнительная категория: " + КатегорииОбъектов.Наименование КАК Наименование
		ИЗ
			Справочник.КатегорииОбъектов КАК КатегорииОбъектов
		ГДЕ
			КатегорииОбъектов.НазначениеКатегории = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_СотрудникиОрганизаций)
			И (НЕ КатегорииОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ЗНАЧЕНИЯ РегистрСведений.КатегорииОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Категория }
{ХАРАКТЕРИСТИКИ
	ТИП(Справочник.СотрудникиОрганизаций)
	СПИСОК (ВЫБРАТЬ
			СвойстваОбъектов.Ссылка,
			" Дополнительное свойство: " + СвойстваОбъектов.Наименование КАК Наименование,
			СвойстваОбъектов.ТипЗначения
		ИЗ
			ПланВидовХарактеристик.СвойстваОбъектов КАК СвойстваОбъектов
		ГДЕ
			СвойстваОбъектов.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_СотрудникиОрганизаций)
			И (НЕ СвойстваОбъектов.ПометкаУдаления))
	ИДЕНТИФИКАТОР Ссылка
	ИМЯ Наименование
	ТИПЗНАЧЕНИЯ ТипЗначения
	ЗНАЧЕНИЯ РегистрСведений.ЗначенияСвойствОбъектов
	ОБЪЕКТ Объект
	ХАРАКТЕРИСТИКА Свойство
	ЗНАЧЕНИЕ Значение }</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>ОрганизацияСотрудника</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Период</dataPath>
			<field>Период</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Период</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Организация</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Сотрудник</dataPath>
			<field>Сотрудник</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сотрудник</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ГоловнаяОрганизация</dataPath>
			<field>ГоловнаяОрганизация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Головная организация</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<dataSource>ИнформационнаяБаза</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	МАКСИМУМ(ВЫБОР
			КОГДА РаботникиОрганизаций.ПериодЗавершения &lt;= ДатыСреза.Период
					И РаботникиОрганизаций.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
				ТОГДА РаботникиОрганизаций.ОбособленноеПодразделениеЗавершения
			ИНАЧЕ РаботникиОрганизаций.ОбособленноеПодразделение
		КОНЕЦ) КАК ОбсобленноеПодразделение,
	ДатыСреза.Сотрудник.Физлицо КАК Сотрудник,
	ДатыСреза.Организация КАК Организация,
	ДатыСреза.Период КАК Период
{ВЫБРАТЬ
	ОбсобленноеПодразделение.* КАК Организация,
	Сотрудник.*,
	Организация.* КАК ГоловнаяОрганизация,
	Период}
ИЗ
	(ВЫБРАТЬ
		СостояниеРаботниковОрганизацийСрезПоследних.Сотрудник КАК Сотрудник,
		СостояниеРаботниковОрганизацийСрезПоследних.Организация КАК Организация,
		СостояниеРаботниковОрганизацийСрезПоследних.Период КАК Период,
		МАКСИМУМ(РаботникиОрганизаций.Период) КАК ДатаПоследнегоДвиждения
	ИЗ
		РегистрСведений.СостояниеРаботниковОрганизаций.СрезПоследних(&amp;Период, ) КАК СостояниеРаботниковОрганизацийСрезПоследних
			ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.РаботникиОрганизаций КАК РаботникиОрганизаций
			ПО СостояниеРаботниковОрганизацийСрезПоследних.Сотрудник = РаботникиОрганизаций.Сотрудник
				И СостояниеРаботниковОрганизацийСрезПоследних.Организация = РаботникиОрганизаций.Организация
				И СостояниеРаботниковОрганизацийСрезПоследних.Период &gt;= РаботникиОрганизаций.Период
				И (РаботникиОрганизаций.ПричинаИзмененияСостояния &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ПричиныИзмененияСостояния.Увольнение))
	ГДЕ
		РаботникиОрганизаций.Сотрудник.ВидЗанятости &lt;&gt; ЗНАЧЕНИЕ(Перечисление.ВидыЗанятостиВОрганизации.ВнутреннееСовместительство)
	
	СГРУППИРОВАТЬ ПО
		СостояниеРаботниковОрганизацийСрезПоследних.Сотрудник,
		СостояниеРаботниковОрганизацийСрезПоследних.Организация,
		СостояниеРаботниковОрганизацийСрезПоследних.Период) КАК ДатыСреза
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.РаботникиОрганизаций КАК РаботникиОрганизаций
		ПО ДатыСреза.Сотрудник = РаботникиОрганизаций.Сотрудник
			И ДатыСреза.Организация = РаботникиОрганизаций.Организация
			И ДатыСреза.ДатаПоследнегоДвиждения = РаботникиОрганизаций.Период
{ГДЕ
	(ВЫБОР
			КОГДА РаботникиОрганизаций.ПериодЗавершения &lt;= ДатыСреза.Период
					И РаботникиОрганизаций.ПериодЗавершения &lt;&gt; ДАТАВРЕМЯ(1, 1, 1, 0, 0, 0)
				ТОГДА РаботникиОрганизаций.ОбособленноеПодразделениеЗавершения
			ИНАЧЕ РаботникиОрганизаций.ОбособленноеПодразделение
		КОНЕЦ).* КАК Организация,
	ДатыСреза.Сотрудник.*,
	ДатыСреза.Организация.* КАК ГоловнаяОрганизация,
	ДатыСреза.Период}

СГРУППИРОВАТЬ ПО
	ДатыСреза.Сотрудник.Физлицо,
	ДатыСреза.Организация,
	ДатыСреза.Период</query>
		<autoFillFields>false</autoFillFields>
	</dataSet>
	<dataSetLink>
		<sourceDataSet>СписокНамеченныхВстреч</sourceDataSet>
		<destinationDataSet>ОрганизацияСотрудника</destinationDataSet>
		<sourceExpression>ВремяНачала</sourceExpression>
		<destinationExpression>Период</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>СписокНамеченныхВстреч</sourceDataSet>
		<destinationDataSet>ОрганизацияСотрудника</destinationDataSet>
		<sourceExpression>ФизЛицо</sourceExpression>
		<destinationExpression>Сотрудник</destinationExpression>
	</dataSetLink>
	<calculatedField>
		<dataPath>ВремяОкончанияПредставление</dataPath>
		<expression>ВЫБОР 
КОГДА ЦелоДневноеОтсутсвие ТОГДА ФОРМАТ(ВремяОкончания, "ДФ=dd.MM.yyyy ЧЧ:мм") 
ИНАЧЕ СТРОКА(ВремяОкончания) 
КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Время окончания представление</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<field>true</field>
			<condition>true</condition>
			<group>true</group>
			<order>true</order>
		</useRestriction>
	</calculatedField>
	<calculatedField>
		<dataPath>ВремяНачалаПредставление</dataPath>
		<expression>ВЫБОР КОГДА ЦелоДневноеОтсутсвие ТОГДА ФОРМАТ(ВремяНачала, "ДФ=dd.MM.yyyy ЧЧ:мм") ИНАЧЕ СТРОКА(ВремяНачала) КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Время начала представление</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<field>true</field>
			<condition>true</condition>
			<group>true</group>
			<order>true</order>
		</useRestriction>
	</calculatedField>
	<calculatedField>
		<dataPath>ПричинаОтсутствияПредставление</dataPath>
		<expression>ВЫБОР 
КОГДА Состояние = ЗНАЧЕНИЕ(Перечисление.ТипыПериодическихЗадачРаботника.Отсутствие) ИЛИ Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботника.Отсутствие) 
ТОГДА "Причина отсутствия: " + СТРОКА(ПричинаОтсутствия) 

КОГДА Состояние = ЗНАЧЕНИЕ(Перечисление.СостоянияРаботникаОрганизации.ОтпускЕжегодный)
ТОГДА "Отпуск ежегодный в организации " + СТРОКА(Организация) 



ИНАЧЕ Состояние КОНЕЦ</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Причина отсутствия представление</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<field>true</field>
			<condition>true</condition>
			<group>true</group>
			<order>true</order>
		</useRestriction>
	</calculatedField>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="xs:string">Основной</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Подразделение</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ФизЛицо</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВремяНачала</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВремяОкончания</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПричинаОтсутствия</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Регистратор.Комментарий</dcsset:field>
					<dcsset:title>Комментарий</dcsset:title>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Подразделение</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.Подразделения.</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">Должность</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ДолжностиОрганизаций.</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ФизЛицо</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="dcscor:DesignTimeValue">Справочник.ФизическиеЛица.</dcsset:right>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:use>false</dcsset:use>
					<dcsset:left xsi:type="dcscor:Field">ЦелоДневноеОтсутсвие</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
					<dcsset:presentation xsi:type="xs:string">Выводить только тех, кто будет отсутствовать целый день</dcsset:presentation>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item>
					<dcscor:parameter>Период</dcscor:parameter>
					<dcscor:value xsi:type="xs:dateTime">0001-01-01T00:00:00</dcscor:value>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>ФизЛицо</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ВремяОкончания</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:use>false</dcscor:use>
							<dcscor:parameter>Формат</dcscor:parameter>
							<dcscor:value xsi:type="xs:string">ДФ=dd.MM.yyyy</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Текст</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:Field">ВремяОкончанияПредставление</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ВремяНачала</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Текст</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:Field">ВремяНачалаПредставление</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ПричинаОтсутствия</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Текст</dcscor:parameter>
							<dcscor:value xsi:type="dcscor:Field">ПричинаОтсутствияПредставление</dcscor:value>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:use>false</dcscor:use>
					<dcscor:parameter>ВертикальноеРасположениеОбщихИтогов</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:DataCompositionTotalPlacement">None</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Занятость сотрудников</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>